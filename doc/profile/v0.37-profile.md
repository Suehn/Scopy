# v0.37 性能对比（v0.36.1 → v0.37）

**日期**: 2025-12-13

## 对比版本

- v0.36.1 → v0.37

> 说明：v0.36.1 为测试/工程版本，性能基线等同 v0.36（见 `doc/profile/v0.36-profile.md` 与 `doc/profile/v0.36.1-profile.md`）。

## 测试环境

- 设备：Apple M3
- 系统：macOS 15.7.2（24G325）
- 架构：arm64
- 配置：Debug
- 命令：`make test-perf`（`RUN_PERF_TESTS=1`）
- 备注：heavy 场景需 `RUN_HEAVY_PERF_TESTS=1` 才运行

## 性能对比表格

| 指标 | v0.36.1 | v0.37 |
|------|--------:|------:|
| Fuzzy 5k items P95 | 5.23ms | 8.55ms |
| Fuzzy 10k items P95 | 44.80ms | 78.40ms |
| Disk 25k fuzzy P95 | 56.94ms | 115.68ms |
| Bulk insert 1000 items | 54.80ms（≈18,248 items/s） | 83.97ms（≈11,908 items/s） |
| Fetch recent (50 items) avg | 0.07ms | 0.11ms |
| Regex 20k items P95 | 3.08ms | 5.54ms |
| Mixed content disk search（single run, after warmup） | 4.27ms | 7.37ms |

## 测试用例变化

- 无新增/删除用例；本次改动集中在 Clipboard ingest 的背压策略与 payload 传递方式，不改 Search/Storage 算法主路径。

## 性能回归说明

- 本次 `make test-perf` 单次运行数据相对 v0.36 基线波动较大；但所有核心 SLO 仍满足（≤5k P95 ≤ 50ms、10k–100k 首屏 P95 ≤ 150ms）。
- 如需更稳定的趋势判断，建议在系统负载更低的条件下重复跑 3 次取中位数。

## 总结

- v0.37 的主要交付是“稳定性与确定性”（P0-6 ingest 背压），性能指标仍在目标范围内；后续建议持续观察 run-to-run 波动。

