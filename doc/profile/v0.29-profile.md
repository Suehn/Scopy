# v0.29 性能对比与测试结果

## 测试环境
- 硬件：MacBook Pro（Apple Silicon，arm64）
- 系统：macOS 14.x+
- Xcode：15.x（SDK macOS 15.4）
- 日期：2025-12-12

## 自动化测试
- 单测：`make test-unit` → **52 tests passed（1 perf skipped）**
- 性能：`make test-perf` → **22/22 passed（含重载）**

## 性能实测数据（本轮）
- Search 5k：Avg **4.61ms** / P95 **4.91ms**
- Search 10k：P95 **42.74ms**
- Disk Search 25k：P95 **42.30ms**
- Heavy Disk Search 50k：P95 **81.24ms**
- Ultra Disk Search 75k：P95 **122.17ms**
- Regex 20k：P95 **2.93ms**
- Inline Cleanup 10k：P95 **64.20ms**
- External Storage Stress：外部占用 **65.5MB**，清理 **3.89ms**
- Memory Usage：初始 102.4MB → 104.8MB（+2.4MB，≈0KB/项）
- Memory Stability：500 迭代 102.4MB → 102.7MB（+0.3MB）

## 与 v0.28 对比（关键指标）

| 场景 | v0.28 | v0.29 | 变化 |
|------|------|------|------|
| Fuzzy 5k P95 | 5.1ms | 4.91ms | -3.7% |
| Fuzzy 10k P95 | 47ms | 42.74ms | -9.1% |
| Disk 25k P95 | 43ms | 42.30ms | -1.6% |
| Heavy Disk 50k P95 | 90.6ms | 81.24ms | -10.3% |
| Ultra Disk 75k P95 | 124.7ms | 122.17ms | -2.0% |

## 结论
- 渐进校准逻辑与内存/渲染/存储优化未引入性能回归，50k/75k 首屏仍稳定达标。
- 全量索引去双份文本驻留与外部写入后台化使长期运行内存与主线程抖动风险更低。

