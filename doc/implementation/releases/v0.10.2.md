# Icon Rendering & Footer UI Enhancement Walkthrough

## Overview

This walkthrough documents the implementation of two major UI improvements:

1. **App Icon Rendering Fix** : Resolved icon sizing issues by implementing custom rendering to remove built-in padding
2. **Footer Visual Cohesion** : Redesigned footer with semantic grouping and better visual hierarchy

## Changes Made

### 1. Custom Icon Rendering -

HeaderView.swift

#### Problem

The app filter icon appeared too large despite size reductions (16px → 12px → 10px → 8px → 6px). Root cause: `NSWorkspace.shared.icon(forFile:)` returns `NSImage` instances with built-in padding/margins.

#### Solution

Implemented custom icon rendering function that:

* Creates a new `NSImage` at exact target size (13pt to match font)
* Uses `bestRepresentation()` for high-quality rendering with interpolation
* Draws directly to target rect without padding
* Sets `isTemplate = false` to preserve app-specific colors

<pre><div node="[object Object]" class="relative whitespace-pre-wrap word-break-all p-3 my-2 rounded-sm bg-list-hover-subtle"><div class="font-mono text-xs"><div><div><div><div data-difftype="2" data-currentoriginalline="1" data-currentmodifiedline="1" data-line-start="1" data-line-end="1" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk4">import</span><span class="mtk1"></span><span class="mtk6">AppKit</span></div></div><div data-difftype="2" data-currentoriginalline="2" data-currentmodifiedline="2" data-line-start="2" data-line-end="2" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk4">import</span><span class="mtk1"></span><span class="mtk6">SwiftUI</span></div></div><div data-difftype="2" data-currentoriginalline="3" data-currentmodifiedline="3" data-line-start="3" data-line-end="3" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div><div data-difftype="2" data-currentoriginalline="4" data-currentmodifiedline="4" data-line-start="4" data-line-end="4" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk13 mtki">/// 头部视图 - 包含标题、过滤按钮和搜索框</span></div></div><div data-difftype="2" data-currentoriginalline="5" data-currentmodifiedline="5" data-line-start="5" data-line-end="5" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk4">struct</span><span class="mtk1"></span><span class="mtk6">HeaderView</span><span class="mtk1">: </span><span class="mtk6">View </span><span class="mtk1">{</span></div></div><div data-difftype="2" data-currentoriginalline="6" data-currentmodifiedline="6" data-line-start="6" data-line-end="6" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">@Binding</span><span class="mtk1"></span><span class="mtk4">var</span><span class="mtk1"> searchQuery: </span><span class="mtk6">String</span></div></div><div data-difftype="2" data-currentoriginalline="7" data-currentmodifiedline="7" data-line-start="7" data-line-end="7" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">@FocusState</span><span class="mtk1">.</span><span class="mtk3">Binding</span><span class="mtk1"></span><span class="mtk4">var</span><span class="mtk1"> searchFocused: </span><span class="mtk6">Bool</span></div></div><div data-difftype="2" data-currentoriginalline="8" data-currentmodifiedline="8" data-line-start="8" data-line-end="8" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div><div data-difftype="2" data-currentoriginalline="9" data-currentmodifiedline="9" data-line-start="9" data-line-end="9" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">@Environment</span><span class="mtk1">(AppState.</span><span class="mtk4">self</span><span class="mtk1">) </span><span class="mtk4">private</span><span class="mtk1"></span><span class="mtk4">var</span><span class="mtk1"> appState</span></div></div><div data-difftype="2" data-currentoriginalline="10" data-currentmodifiedline="10" data-line-start="10" data-line-end="10" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div><div data-difftype="2" data-currentoriginalline="11" data-currentmodifiedline="11" data-line-start="11" data-line-end="11" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">var</span><span class="mtk1"> body: </span><span class="mtk4">some</span><span class="mtk1"> View {</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="12" data-line-start="12" data-line-end="12" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">VStack</span><span class="mtk1">(</span><span class="mtk7">alignment</span><span class="mtk1">: .</span><span class="mtk3">leading</span><span class="mtk1">, </span><span class="mtk7">spacing</span><span class="mtk1">: ScopySpacing.</span><span class="mtk3">sm</span><span class="mtk1">) {</span></div></div><div data-difftype="1" data-currentoriginalline="13" data-line-start="13" data-line-end="13" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: ScopySpacing.</span><span class="mtk3">md</span><span class="mtk1">) {</span></div></div><div data-difftype="1" data-currentoriginalline="14" data-line-start="14" data-line-end="14" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: ScopySpacing.</span><span class="mtk3">sm</span><span class="mtk1">) {</span></div></div><div data-difftype="1" data-currentoriginalline="15" data-line-start="15" data-line-end="15" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">systemName</span><span class="mtk1">: ScopyIcons.</span><span class="mtk3">search</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="16" data-line-start="16" data-line-end="16" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                        .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(Color.</span><span class="mtk3">accentColor</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="17" data-line-start="17" data-line-end="17" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Text</span><span class="mtk1">(</span><span class="mtk9">"Scopy"</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="18" data-line-start="18" data-line-end="18" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                        .</span><span class="mtk7">font</span><span class="mtk1">(ScopyTypography.</span><span class="mtk3">title</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="19" data-line-start="19" data-line-end="19" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                        .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(.</span><span class="mtk3">primary</span><span class="mtk1">)</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="12" data-line-start="12" data-line-end="12" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: ScopySpacing.</span><span class="mtk3">md</span><span class="mtk1">) {</span></div></div><div data-difftype="0" data-currentmodifiedline="13" data-line-start="13" data-line-end="13" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk13 mtki">// Search Icon</span></div></div><div data-difftype="0" data-currentmodifiedline="14" data-line-start="14" data-line-end="14" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">systemName</span><span class="mtk1">: ScopyIcons.</span><span class="mtk3">search</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="15" data-line-start="15" data-line-end="15" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                .</span><span class="mtk7">font</span><span class="mtk1">(.</span><span class="mtk7">system</span><span class="mtk1">(</span><span class="mtk7">size</span><span class="mtk1">: </span><span class="mtk5">18</span><span class="mtk1">, </span><span class="mtk7">weight</span><span class="mtk1">: .</span><span class="mtk3">medium</span><span class="mtk1">))</span></div></div><div data-difftype="0" data-currentmodifiedline="16" data-line-start="16" data-line-end="16" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">mutedText</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="17" data-line-start="17" data-line-end="17" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="0" data-currentmodifiedline="18" data-line-start="18" data-line-end="18" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk13 mtki">// Search Field</span></div></div><div data-difftype="0" data-currentmodifiedline="19" data-line-start="19" data-line-end="19" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">TextField</span><span class="mtk1">(</span><span class="mtk9">"Search..."</span><span class="mtk1">, </span><span class="mtk7">text</span><span class="mtk1">: $searchQuery)</span></div></div><div data-difftype="0" data-currentmodifiedline="20" data-line-start="20" data-line-end="20" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                .</span><span class="mtk7">textFieldStyle</span><span class="mtk1">(.</span><span class="mtk3">plain</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="21" data-line-start="21" data-line-end="21" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                .</span><span class="mtk7">font</span><span class="mtk1">(.</span><span class="mtk7">system</span><span class="mtk1">(</span><span class="mtk7">size</span><span class="mtk1">: </span><span class="mtk5">20</span><span class="mtk1">, </span><span class="mtk7">weight</span><span class="mtk1">: .</span><span class="mtk3">light</span><span class="mtk1">))</span></div></div><div data-difftype="0" data-currentmodifiedline="22" data-line-start="22" data-line-end="22" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                .</span><span class="mtk7">focused</span><span class="mtk1">($searchFocused)</span></div></div><div data-difftype="0" data-currentmodifiedline="23" data-line-start="23" data-line-end="23" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                .</span><span class="mtk7">onChange</span><span class="mtk1">(</span><span class="mtk7">of</span><span class="mtk1">: searchQuery) {</span></div></div><div data-difftype="0" data-currentmodifiedline="24" data-line-start="24" data-line-end="24" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    appState.</span><span class="mtk7">search</span><span class="mtk1">()</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="20" data-currentmodifiedline="25" data-line-start="20" data-line-end="20" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">                }</span></div></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="26" data-line-start="26" data-line-end="26" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                .</span><span class="mtk7">onSubmit</span><span class="mtk1"> {</span></div></div><div data-difftype="0" data-currentmodifiedline="27" data-line-start="27" data-line-end="27" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Task</span><span class="mtk1"> { </span><span class="mtk4">await</span><span class="mtk1"> appState.</span><span class="mtk7">selectCurrent</span><span class="mtk1">() }</span></div></div><div data-difftype="0" data-currentmodifiedline="28" data-line-start="28" data-line-end="28" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                }</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="21" data-currentmodifiedline="29" data-line-start="21" data-line-end="21" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="22" data-line-start="22" data-line-end="22" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Spacer</span><span class="mtk1">()</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="30" data-line-start="30" data-line-end="30" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Spacer</span><span class="mtk1">()</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="23" data-currentmodifiedline="31" data-line-start="23" data-line-end="23" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="24" data-line-start="24" data-line-end="24" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">SearchModeMenu</span><span class="mtk1">()</span></div></div><div data-difftype="1" data-currentoriginalline="25" data-line-start="25" data-line-end="25" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">            }</span></div></div><div data-difftype="1" data-currentoriginalline="26" data-line-start="26" data-line-end="26" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="32" data-line-start="32" data-line-end="32" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk13 mtki">// Filters & Actions</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="27" data-currentmodifiedline="33" data-line-start="27" data-line-end="27" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: ScopySpacing.</span><span class="mtk3">sm</span><span class="mtk1">) {</span></div></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="34" data-line-start="34" data-line-end="34" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">if</span><span class="mtk1"> !searchQuery.isEmpty {</span></div></div><div data-difftype="0" data-currentmodifiedline="35" data-line-start="35" data-line-end="35" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Button</span><span class="mtk1"> {</span></div></div><div data-difftype="0" data-currentmodifiedline="36" data-line-start="36" data-line-end="36" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                        searchQuery = </span><span class="mtk9">""</span></div></div><div data-difftype="0" data-currentmodifiedline="37" data-line-start="37" data-line-end="37" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                        appState.</span><span class="mtk7">search</span><span class="mtk1">()</span></div></div><div data-difftype="0" data-currentmodifiedline="38" data-line-start="38" data-line-end="38" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    } </span><span class="mtk7">label</span><span class="mtk1">: {</span></div></div><div data-difftype="0" data-currentmodifiedline="39" data-line-start="39" data-line-end="39" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">systemName</span><span class="mtk1">: ScopyIcons.</span><span class="mtk3">clear</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="40" data-line-start="40" data-line-end="40" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                            .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">mutedText</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="41" data-line-start="41" data-line-end="41" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    }</span></div></div><div data-difftype="0" data-currentmodifiedline="42" data-line-start="42" data-line-end="42" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">buttonStyle</span><span class="mtk1">(.</span><span class="mtk3">plain</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="43" data-line-start="43" data-line-end="43" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                }</span></div></div><div data-difftype="0" data-currentmodifiedline="44" data-line-start="44" data-line-end="44" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="0" data-currentmodifiedline="45" data-line-start="45" data-line-end="45" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Divider</span><span class="mtk1">()</span></div></div><div data-difftype="0" data-currentmodifiedline="46" data-line-start="46" data-line-end="46" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">frame</span><span class="mtk1">(</span><span class="mtk7">height</span><span class="mtk1">: </span><span class="mtk5">16</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="47" data-line-start="47" data-line-end="47" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="28" data-currentmodifiedline="48" data-line-start="28" data-line-end="28" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">AppFilterButton</span><span class="mtk1">()</span></div></div><div data-difftype="2" data-currentoriginalline="29" data-currentmodifiedline="49" data-line-start="29" data-line-end="29" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">TypeFilterButton</span><span class="mtk1">()</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="30" data-line-start="30" data-line-end="30" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="1" data-currentoriginalline="31" data-line-start="31" data-line-end="31" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">SearchFieldView</span><span class="mtk1">(</span></div></div><div data-difftype="1" data-currentoriginalline="32" data-line-start="32" data-line-end="32" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">query</span><span class="mtk1">: $searchQuery,</span></div></div><div data-difftype="1" data-currentoriginalline="33" data-line-start="33" data-line-end="33" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">searchFocused</span><span class="mtk1">: $searchFocused</span></div></div><div data-difftype="1" data-currentoriginalline="34" data-line-start="34" data-line-end="34" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                )</span></div></div><div data-difftype="1" data-currentoriginalline="35" data-line-start="35" data-line-end="35" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                .</span><span class="mtk7">frame</span><span class="mtk1">(</span><span class="mtk7">maxWidth</span><span class="mtk1">: .infinity)</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="50" data-line-start="50" data-line-end="50" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">SearchModeMenu</span><span class="mtk1">()</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="36" data-currentmodifiedline="51" data-line-start="36" data-line-end="36" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">            }</span></div></div><div data-difftype="2" data-currentoriginalline="37" data-currentmodifiedline="52" data-line-start="37" data-line-end="37" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        }</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="38" data-line-start="38" data-line-end="38" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">        .</span><span class="mtk7">padding</span><span class="mtk1">(.</span><span class="mtk3">horizontal</span><span class="mtk1">, ScopySpacing.</span><span class="mtk3">md</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="39" data-line-start="39" data-line-end="39" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">        .</span><span class="mtk7">padding</span><span class="mtk1">(.</span><span class="mtk3">vertical</span><span class="mtk1">, ScopySpacing.</span><span class="mtk3">sm</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="40" data-line-start="40" data-line-end="40" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">        .</span><span class="mtk7">background</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">headerBackground</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="41" data-line-start="41" data-line-end="41" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">        .</span><span class="mtk7">clipShape</span><span class="mtk1">(</span><span class="mtk7">RoundedRectangle</span><span class="mtk1">(</span><span class="mtk7">cornerRadius</span><span class="mtk1">: </span><span class="mtk5">8</span><span class="mtk1">, </span><span class="mtk7">style</span><span class="mtk1">: .</span><span class="mtk3">continuous</span><span class="mtk1">))</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="53" data-line-start="53" data-line-end="53" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">        .</span><span class="mtk7">padding</span><span class="mtk1">(ScopySpacing.</span><span class="mtk3">md</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="54" data-line-start="54" data-line-end="54" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">        .</span><span class="mtk7">background</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">cardBackground</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="55" data-line-start="55" data-line-end="55" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">        .</span><span class="mtk7">clipShape</span><span class="mtk1">(</span><span class="mtk7">RoundedRectangle</span><span class="mtk1">(</span><span class="mtk7">cornerRadius</span><span class="mtk1">: </span><span class="mtk5">10</span><span class="mtk1">, </span><span class="mtk7">style</span><span class="mtk1">: .</span><span class="mtk3">continuous</span><span class="mtk1">))</span></div></div><div data-difftype="0" data-currentmodifiedline="56" data-line-start="56" data-line-end="56" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">        .</span><span class="mtk7">overlay</span><span class="mtk1">(</span></div></div><div data-difftype="0" data-currentmodifiedline="57" data-line-start="57" data-line-end="57" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">RoundedRectangle</span><span class="mtk1">(</span><span class="mtk7">cornerRadius</span><span class="mtk1">: </span><span class="mtk5">10</span><span class="mtk1">, </span><span class="mtk7">style</span><span class="mtk1">: .</span><span class="mtk3">continuous</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="58" data-line-start="58" data-line-end="58" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                .</span><span class="mtk7">stroke</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">border</span><span class="mtk1">.</span><span class="mtk7">opacity</span><span class="mtk1">(</span><span class="mtk5">0.5</span><span class="mtk1">), </span><span class="mtk7">lineWidth</span><span class="mtk1">: </span><span class="mtk5">0.5</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="59" data-line-start="59" data-line-end="59" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">        )</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="42" data-currentmodifiedline="60" data-line-start="42" data-line-end="42" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">    }</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="43" data-line-start="43" data-line-end="43" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">}</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="61" data-line-start="61" data-line-end="61" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">    }</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="44" data-currentmodifiedline="62" data-line-start="44" data-line-end="44" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div><div data-difftype="2" data-currentoriginalline="45" data-currentmodifiedline="63" data-line-start="45" data-line-end="45" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk13 mtki">// MARK: - Search Mode Menu</span></div></div><div data-difftype="2" data-currentoriginalline="46" data-currentmodifiedline="64" data-line-start="46" data-line-end="46" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="65" data-line-start="65" data-line-end="65" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk13 mtki">// MARK: - Search Mode Menu</span></div></div><div data-difftype="0" data-currentmodifiedline="66" data-line-start="66" data-line-end="66" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="47" data-currentmodifiedline="67" data-line-start="47" data-line-end="47" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk4">private</span><span class="mtk1"></span><span class="mtk4">struct</span><span class="mtk1"></span><span class="mtk6">SearchModeMenu</span><span class="mtk1">: </span><span class="mtk6">View </span><span class="mtk1">{</span></div></div><div data-difftype="2" data-currentoriginalline="48" data-currentmodifiedline="68" data-line-start="48" data-line-end="48" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">@Environment</span><span class="mtk1">(AppState.</span><span class="mtk4">self</span><span class="mtk1">) </span><span class="mtk4">private</span><span class="mtk1"></span><span class="mtk4">var</span><span class="mtk1"> appState</span></div></div><div data-difftype="2" data-currentoriginalline="49" data-currentmodifiedline="69" data-line-start="49" data-line-end="49" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div></div><div><div data-difftype="2" data-currentoriginalline="63" data-currentmodifiedline="83" data-line-start="63" data-line-end="63" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">                }</span></div></div><div data-difftype="2" data-currentoriginalline="64" data-currentmodifiedline="84" data-line-start="64" data-line-end="64" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">            }</span></div></div><div data-difftype="2" data-currentoriginalline="65" data-currentmodifiedline="85" data-line-start="65" data-line-end="65" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        } </span><span class="mtk7">label</span><span class="mtk1">: {</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="66" data-line-start="66" data-line-end="66" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">InfoTag</span><span class="mtk1">(</span><span class="mtk7">text</span><span class="mtk1">: </span><span class="mtk7">modeLabel</span><span class="mtk1">(appState.</span><span class="mtk3">searchMode</span><span class="mtk1">), </span><span class="mtk7">systemImage</span><span class="mtk1">: </span><span class="mtk9">"line.3.horizontal.decrease.circle"</span><span class="mtk1">)</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="86" data-line-start="86" data-line-end="86" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: </span><span class="mtk5">2</span><span class="mtk1">) {</span></div></div><div data-difftype="0" data-currentmodifiedline="87" data-line-start="87" data-line-end="87" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">systemName</span><span class="mtk1">: </span><span class="mtk7">modeIcon</span><span class="mtk1">(appState.</span><span class="mtk3">searchMode</span><span class="mtk1">))</span></div></div><div data-difftype="0" data-currentmodifiedline="88" data-line-start="88" data-line-end="88" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">systemName</span><span class="mtk1">: </span><span class="mtk9">"chevron.down"</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="89" data-line-start="89" data-line-end="89" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">font</span><span class="mtk1">(.</span><span class="mtk7">system</span><span class="mtk1">(</span><span class="mtk7">size</span><span class="mtk1">: </span><span class="mtk5">8</span><span class="mtk1">, </span><span class="mtk7">weight</span><span class="mtk1">: .</span><span class="mtk3">bold</span><span class="mtk1">))</span></div></div><div data-difftype="0" data-currentmodifiedline="90" data-line-start="90" data-line-end="90" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">tertiaryText</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="91" data-line-start="91" data-line-end="91" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            }</span></div></div><div data-difftype="0" data-currentmodifiedline="92" data-line-start="92" data-line-end="92" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            .</span><span class="mtk7">font</span><span class="mtk1">(.</span><span class="mtk7">system</span><span class="mtk1">(</span><span class="mtk7">size</span><span class="mtk1">: </span><span class="mtk5">13</span><span class="mtk1">))</span></div></div><div data-difftype="0" data-currentmodifiedline="93" data-line-start="93" data-line-end="93" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">mutedText</span><span class="mtk1">)</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="67" data-currentmodifiedline="94" data-line-start="67" data-line-end="67" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        }</span></div></div><div data-difftype="2" data-currentoriginalline="68" data-currentmodifiedline="95" data-line-start="68" data-line-end="68" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        .</span><span class="mtk7">menuStyle</span><span class="mtk1">(.</span><span class="mtk3">borderlessButton</span><span class="mtk1">)</span></div></div><div data-difftype="2" data-currentoriginalline="69" data-currentmodifiedline="96" data-line-start="69" data-line-end="69" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        .</span><span class="mtk7">help</span><span class="mtk1">(</span><span class="mtk9">"Search mode"</span><span class="mtk1">)</span></div></div><div data-difftype="2" data-currentoriginalline="70" data-currentmodifiedline="97" data-line-start="70" data-line-end="70" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">    }</span></div></div><div data-difftype="2" data-currentoriginalline="71" data-currentmodifiedline="98" data-line-start="71" data-line-end="71" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div><div data-difftype="2" data-currentoriginalline="72" data-currentmodifiedline="99" data-line-start="72" data-line-end="72" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">private</span><span class="mtk1"></span><span class="mtk4">func</span><span class="mtk1"></span><span class="mtk7">modeLabel</span><span class="mtk1">(</span><span class="mtk7">_</span><span class="mtk1"></span><span class="mtk1 mtki">mode</span><span class="mtk1">: SearchMode) -> </span><span class="mtk6">String</span><span class="mtk1"> {</span></div></div><div data-difftype="2" data-currentoriginalline="73" data-currentmodifiedline="100" data-line-start="73" data-line-end="73" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">switch</span><span class="mtk1"> mode {</span></div></div><div data-difftype="2" data-currentoriginalline="74" data-currentmodifiedline="101" data-line-start="74" data-line-end="74" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">case</span><span class="mtk1"> .</span><span class="mtk3">exact</span><span class="mtk4">:</span><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk9">"Exact"</span></div></div><div data-difftype="2" data-currentoriginalline="75" data-currentmodifiedline="102" data-line-start="75" data-line-end="75" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">case</span><span class="mtk1"> .</span><span class="mtk3">fuzzy</span><span class="mtk4">:</span><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk9">"Fuzzy"</span></div></div><div data-difftype="2" data-currentoriginalline="76" data-currentmodifiedline="103" data-line-start="76" data-line-end="76" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">case</span><span class="mtk1"> .</span><span class="mtk3">regex</span><span class="mtk4">:</span><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk9">"Regex"</span></div></div><div data-difftype="2" data-currentoriginalline="77" data-currentmodifiedline="104" data-line-start="77" data-line-end="77" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        }</span></div></div><div data-difftype="2" data-currentoriginalline="78" data-currentmodifiedline="105" data-line-start="78" data-line-end="78" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">    }</span></div></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="106" data-line-start="106" data-line-end="106" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="0" data-currentmodifiedline="107" data-line-start="107" data-line-end="107" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">private</span><span class="mtk1"></span><span class="mtk4">func</span><span class="mtk1"></span><span class="mtk7">modeIcon</span><span class="mtk1">(</span><span class="mtk7">_</span><span class="mtk1"></span><span class="mtk1 mtki">mode</span><span class="mtk1">: SearchMode) -> </span><span class="mtk6">String</span><span class="mtk1"> {</span></div></div><div data-difftype="0" data-currentmodifiedline="108" data-line-start="108" data-line-end="108" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">switch</span><span class="mtk1"> mode {</span></div></div><div data-difftype="0" data-currentmodifiedline="109" data-line-start="109" data-line-end="109" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">case</span><span class="mtk1"> .</span><span class="mtk3">exact</span><span class="mtk4">:</span><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk9">"text.quote"</span></div></div><div data-difftype="0" data-currentmodifiedline="110" data-line-start="110" data-line-end="110" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">case</span><span class="mtk1"> .</span><span class="mtk3">fuzzy</span><span class="mtk4">:</span><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk9">"text.magnifyingglass"</span></div></div><div data-difftype="0" data-currentmodifiedline="111" data-line-start="111" data-line-end="111" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">case</span><span class="mtk1"> .</span><span class="mtk3">regex</span><span class="mtk4">:</span><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk9">"asterisk.circle"</span></div></div><div data-difftype="0" data-currentmodifiedline="112" data-line-start="112" data-line-end="112" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">        }</span></div></div><div data-difftype="0" data-currentmodifiedline="113" data-line-start="113" data-line-end="113" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">    }</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="79" data-currentmodifiedline="114" data-line-start="79" data-line-end="79" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">}</span></div></div><div data-difftype="2" data-currentoriginalline="80" data-currentmodifiedline="115" data-line-start="80" data-line-end="80" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div><div data-difftype="2" data-currentoriginalline="81" data-currentmodifiedline="116" data-line-start="81" data-line-end="81" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk13 mtki">// MARK: - App Filter Button</span></div></div></div><div><div data-difftype="2" data-currentoriginalline="118" data-currentmodifiedline="153" data-line-start="118" data-line-end="118" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">                }</span></div></div><div data-difftype="2" data-currentoriginalline="119" data-currentmodifiedline="154" data-line-start="119" data-line-end="119" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">            }</span></div></div><div data-difftype="2" data-currentoriginalline="120" data-currentmodifiedline="155" data-line-start="120" data-line-end="120" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        } </span><span class="mtk7">label</span><span class="mtk1">: {</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="121" data-line-start="121" data-line-end="121" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: ScopySpacing.</span><span class="mtk3">xs</span><span class="mtk1">) {</span></div></div><div data-difftype="1" data-currentoriginalline="122" data-line-start="122" data-line-end="122" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">systemName</span><span class="mtk1">: ScopyIcons.</span><span class="mtk3">filterApp</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="123" data-line-start="123" data-line-end="123" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Text</span><span class="mtk1">(appState.</span><span class="mtk3">appFilter</span><span class="mtk1"> == </span><span class="mtk5">nil</span><span class="mtk1"> ? </span><span class="mtk9">"All Apps"</span><span class="mtk1"></span><span class="mtk4">:</span><span class="mtk1"></span><span class="mtk7">appName</span><span class="mtk1">(</span><span class="mtk7">for</span><span class="mtk1">: appState.</span><span class="mtk3">appFilter</span><span class="mtk1">!))</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="156" data-line-start="156" data-line-end="156" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: </span><span class="mtk5">2</span><span class="mtk1">) {</span></div></div><div data-difftype="0" data-currentmodifiedline="157" data-line-start="157" data-line-end="157" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">if</span><span class="mtk1"></span><span class="mtk4">let</span><span class="mtk1"> bundleID = appState.appFilter, </span><span class="mtk4">let</span><span class="mtk1"> icon = </span><span class="mtk7">appIcon</span><span class="mtk1">(</span><span class="mtk7">for</span><span class="mtk1">: bundleID) {</span></div></div><div data-difftype="0" data-currentmodifiedline="158" data-line-start="158" data-line-end="158" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">nsImage</span><span class="mtk1">: icon)</span></div></div><div data-difftype="0" data-currentmodifiedline="159" data-line-start="159" data-line-end="159" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                        .</span><span class="mtk7">resizable</span><span class="mtk1">()</span></div></div><div data-difftype="0" data-currentmodifiedline="160" data-line-start="160" data-line-end="160" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                        .</span><span class="mtk7">aspectRatio</span><span class="mtk1">(</span><span class="mtk7">contentMode</span><span class="mtk1">: .</span><span class="mtk3">fit</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="161" data-line-start="161" data-line-end="161" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                        .</span><span class="mtk7">frame</span><span class="mtk1">(</span><span class="mtk7">width</span><span class="mtk1">: </span><span class="mtk5">13</span><span class="mtk1">, </span><span class="mtk7">height</span><span class="mtk1">: </span><span class="mtk5">13</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="162" data-line-start="162" data-line-end="162" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                } </span><span class="mtk4">else</span><span class="mtk1"> {</span></div></div><div data-difftype="0" data-currentmodifiedline="163" data-line-start="163" data-line-end="163" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">systemName</span><span class="mtk1">: ScopyIcons.</span><span class="mtk3">filterApp</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="164" data-line-start="164" data-line-end="164" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                }</span></div></div><div data-difftype="0" data-currentmodifiedline="165" data-line-start="165" data-line-end="165" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="0" data-currentmodifiedline="166" data-line-start="166" data-line-end="166" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">systemName</span><span class="mtk1">: </span><span class="mtk9">"chevron.down"</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="167" data-line-start="167" data-line-end="167" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">font</span><span class="mtk1">(.</span><span class="mtk7">system</span><span class="mtk1">(</span><span class="mtk7">size</span><span class="mtk1">: </span><span class="mtk5">8</span><span class="mtk1">, </span><span class="mtk7">weight</span><span class="mtk1">: .</span><span class="mtk3">bold</span><span class="mtk1">))</span></div></div><div data-difftype="0" data-currentmodifiedline="168" data-line-start="168" data-line-end="168" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">tertiaryText</span><span class="mtk1">)</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="124" data-currentmodifiedline="169" data-line-start="124" data-line-end="124" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">            }</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="125" data-line-start="125" data-line-end="125" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">            .</span><span class="mtk7">font</span><span class="mtk1">(ScopyTypography.</span><span class="mtk3">caption</span><span class="mtk1">)</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="170" data-line-start="170" data-line-end="170" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            .</span><span class="mtk7">font</span><span class="mtk1">(.</span><span class="mtk7">system</span><span class="mtk1">(</span><span class="mtk7">size</span><span class="mtk1">: </span><span class="mtk5">13</span><span class="mtk1">))</span></div></div><div data-difftype="0" data-currentmodifiedline="171" data-line-start="171" data-line-end="171" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">mutedText</span><span class="mtk1">)</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="126" data-currentmodifiedline="172" data-line-start="126" data-line-end="126" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        }</span></div></div><div data-difftype="2" data-currentoriginalline="127" data-currentmodifiedline="173" data-line-start="127" data-line-end="127" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        .</span><span class="mtk7">menuStyle</span><span class="mtk1">(.</span><span class="mtk3">borderlessButton</span><span class="mtk1">)</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="128" data-line-start="128" data-line-end="128" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">        .</span><span class="mtk7">buttonStyle</span><span class="mtk1">(</span><span class="mtk7">CapsuleFilterButtonStyle</span><span class="mtk1">(</span><span class="mtk7">isActive</span><span class="mtk1">: appState.</span><span class="mtk3">appFilter</span><span class="mtk1"> != </span><span class="mtk5">nil</span><span class="mtk1">))</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="129" data-currentmodifiedline="174" data-line-start="129" data-line-end="129" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        .</span><span class="mtk7">help</span><span class="mtk1">(</span><span class="mtk9">"Filter by app"</span><span class="mtk1">)</span></div></div><div data-difftype="2" data-currentoriginalline="130" data-currentmodifiedline="175" data-line-start="130" data-line-end="130" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">    }</span></div></div><div data-difftype="2" data-currentoriginalline="131" data-currentmodifiedline="176" data-line-start="131" data-line-end="131" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div><div data-difftype="2" data-currentoriginalline="132" data-currentmodifiedline="177" data-line-start="132" data-line-end="132" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">private</span><span class="mtk1"></span><span class="mtk4">func</span><span class="mtk1"></span><span class="mtk7">appIcon</span><span class="mtk1">(</span><span class="mtk7">for</span><span class="mtk1"></span><span class="mtk1 mtki">bundleID</span><span class="mtk1">: </span><span class="mtk6">String</span><span class="mtk1">) -> NSImage? {</span></div></div><div data-difftype="2" data-currentoriginalline="133" data-currentmodifiedline="178" data-line-start="133" data-line-end="133" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">guard</span><span class="mtk1"></span><span class="mtk4">let</span><span class="mtk1"> url = NSWorkspace.shared.</span><span class="mtk7">urlForApplication</span><span class="mtk1">(</span><span class="mtk7">withBundleIdentifier</span><span class="mtk1">: bundleID) </span><span class="mtk4">else</span><span class="mtk1"> {</span></div></div><div data-difftype="2" data-currentoriginalline="134" data-currentmodifiedline="179" data-line-start="134" data-line-end="134" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk5">nil</span></div></div><div data-difftype="2" data-currentoriginalline="135" data-currentmodifiedline="180" data-line-start="135" data-line-end="135" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        }</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="136" data-line-start="136" data-line-end="136" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"> NSWorkspace.</span><span class="mtk3">shared</span><span class="mtk1">.</span><span class="mtk7">icon</span><span class="mtk1">(</span><span class="mtk7">forFile</span><span class="mtk1">: url.</span><span class="mtk3">path</span><span class="mtk1">)</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="181" data-line-start="181" data-line-end="181" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">let</span><span class="mtk1"> sourceIcon = NSWorkspace.</span><span class="mtk3">shared</span><span class="mtk1">.</span><span class="mtk7">icon</span><span class="mtk1">(</span><span class="mtk7">forFile</span><span class="mtk1">: url.</span><span class="mtk3">path</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="182" data-line-start="182" data-line-end="182" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="0" data-currentmodifiedline="183" data-line-start="183" data-line-end="183" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk13 mtki">// Create properly sized icon without padding</span></div></div><div data-difftype="0" data-currentmodifiedline="184" data-line-start="184" data-line-end="184" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">let</span><span class="mtk1"> targetSize = </span><span class="mtk7">NSSize</span><span class="mtk1">(</span><span class="mtk7">width</span><span class="mtk1">: </span><span class="mtk5">13</span><span class="mtk1">, </span><span class="mtk7">height</span><span class="mtk1">: </span><span class="mtk5">13</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="185" data-line-start="185" data-line-end="185" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">let</span><span class="mtk1"> croppedIcon = </span><span class="mtk7">NSImage</span><span class="mtk1">(</span><span class="mtk7">size</span><span class="mtk1">: targetSize)</span></div></div><div data-difftype="0" data-currentmodifiedline="186" data-line-start="186" data-line-end="186" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="0" data-currentmodifiedline="187" data-line-start="187" data-line-end="187" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">        croppedIcon.</span><span class="mtk7">lockFocus</span><span class="mtk1">()</span></div></div><div data-difftype="0" data-currentmodifiedline="188" data-line-start="188" data-line-end="188" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="0" data-currentmodifiedline="189" data-line-start="189" data-line-end="189" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk13 mtki">// Find the best representation and draw centered</span></div></div><div data-difftype="0" data-currentmodifiedline="190" data-line-start="190" data-line-end="190" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">if</span><span class="mtk1"></span><span class="mtk4">let</span><span class="mtk1"> bestRep = sourceIcon.</span><span class="mtk7">bestRepresentation</span><span class="mtk1">(</span><span class="mtk7">for</span><span class="mtk1">: </span><span class="mtk7">NSRect</span><span class="mtk1">(</span><span class="mtk7">origin</span><span class="mtk1">: .</span><span class="mtk3">zero</span><span class="mtk1">, </span><span class="mtk7">size</span><span class="mtk1">: targetSize), </span></div></div><div data-difftype="0" data-currentmodifiedline="191" data-line-start="191" data-line-end="191" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">context</span><span class="mtk1">: </span><span class="mtk5">nil</span><span class="mtk1">, </span></div></div><div data-difftype="0" data-currentmodifiedline="192" data-line-start="192" data-line-end="192" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">hints</span><span class="mtk1">: [.</span><span class="mtk3">interpolation</span><span class="mtk4">:</span><span class="mtk1"></span><span class="mtk7">NSNumber</span><span class="mtk1">(</span><span class="mtk7">value</span><span class="mtk1">: NSImageInterpolation.</span><span class="mtk3">high</span><span class="mtk1">.rawValue)]) {</span></div></div><div data-difftype="0" data-currentmodifiedline="193" data-line-start="193" data-line-end="193" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            bestRep.</span><span class="mtk7">draw</span><span class="mtk1">(</span><span class="mtk7">in</span><span class="mtk1">: </span><span class="mtk7">NSRect</span><span class="mtk1">(</span><span class="mtk7">origin</span><span class="mtk1">: .</span><span class="mtk3">zero</span><span class="mtk1">, </span><span class="mtk7">size</span><span class="mtk1">: targetSize))</span></div></div><div data-difftype="0" data-currentmodifiedline="194" data-line-start="194" data-line-end="194" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">        }</span></div></div><div data-difftype="0" data-currentmodifiedline="195" data-line-start="195" data-line-end="195" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="0" data-currentmodifiedline="196" data-line-start="196" data-line-end="196" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">        croppedIcon.</span><span class="mtk7">unlockFocus</span><span class="mtk1">()</span></div></div><div data-difftype="0" data-currentmodifiedline="197" data-line-start="197" data-line-end="197" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">        croppedIcon.</span><span class="mtk3">isTemplate</span><span class="mtk1"> = </span><span class="mtk5">false</span></div></div><div data-difftype="0" data-currentmodifiedline="198" data-line-start="198" data-line-end="198" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="0" data-currentmodifiedline="199" data-line-start="199" data-line-end="199" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"> croppedIcon</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="137" data-currentmodifiedline="200" data-line-start="137" data-line-end="137" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">    }</span></div></div><div data-difftype="2" data-currentoriginalline="138" data-currentmodifiedline="201" data-line-start="138" data-line-end="138" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div><div data-difftype="2" data-currentoriginalline="139" data-currentmodifiedline="202" data-line-start="139" data-line-end="139" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">private</span><span class="mtk1"></span><span class="mtk4">func</span><span class="mtk1"></span><span class="mtk7">appName</span><span class="mtk1">(</span><span class="mtk7">for</span><span class="mtk1"></span><span class="mtk1 mtki">bundleID</span><span class="mtk1">: </span><span class="mtk6">String</span><span class="mtk1">) -> </span><span class="mtk6">String</span><span class="mtk1"> {</span></div></div></div><div><div data-difftype="2" data-currentoriginalline="169" data-currentmodifiedline="232" data-line-start="169" data-line-end="169" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">typeMenuItem</span><span class="mtk1">(.image, </span><span class="mtk7">label</span><span class="mtk1">: </span><span class="mtk9">"Image"</span><span class="mtk1">, </span><span class="mtk7">icon</span><span class="mtk1">: </span><span class="mtk9">"photo"</span><span class="mtk1">)</span></div></div><div data-difftype="2" data-currentoriginalline="170" data-currentmodifiedline="233" data-line-start="170" data-line-end="170" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">typeMenuItem</span><span class="mtk1">(.</span><span class="mtk3">file</span><span class="mtk1">, </span><span class="mtk7">label</span><span class="mtk1">: </span><span class="mtk9">"File"</span><span class="mtk1">, </span><span class="mtk7">icon</span><span class="mtk1">: </span><span class="mtk9">"doc.fill"</span><span class="mtk1">)</span></div></div><div data-difftype="2" data-currentoriginalline="171" data-currentmodifiedline="234" data-line-start="171" data-line-end="171" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        } </span><span class="mtk7">label</span><span class="mtk1">: {</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="172" data-line-start="172" data-line-end="172" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: ScopySpacing.</span><span class="mtk3">xs</span><span class="mtk1">) {</span></div></div><div data-difftype="1" data-currentoriginalline="173" data-line-start="173" data-line-end="173" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">systemName</span><span class="mtk1">: ScopyIcons.</span><span class="mtk3">filterType</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="174" data-line-start="174" data-line-end="174" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Text</span><span class="mtk1">(</span><span class="mtk7">typeLabel</span><span class="mtk1">(appState.</span><span class="mtk3">typeFilter</span><span class="mtk1">))</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="235" data-line-start="235" data-line-end="235" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: </span><span class="mtk5">2</span><span class="mtk1">) {</span></div></div><div data-difftype="0" data-currentmodifiedline="236" data-line-start="236" data-line-end="236" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">systemName</span><span class="mtk1">: </span><span class="mtk7">typeIcon</span><span class="mtk1">(appState.</span><span class="mtk3">typeFilter</span><span class="mtk1">))</span></div></div><div data-difftype="0" data-currentmodifiedline="237" data-line-start="237" data-line-end="237" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">systemName</span><span class="mtk1">: </span><span class="mtk9">"chevron.down"</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="238" data-line-start="238" data-line-end="238" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">font</span><span class="mtk1">(.</span><span class="mtk7">system</span><span class="mtk1">(</span><span class="mtk7">size</span><span class="mtk1">: </span><span class="mtk5">8</span><span class="mtk1">, </span><span class="mtk7">weight</span><span class="mtk1">: .</span><span class="mtk3">bold</span><span class="mtk1">))</span></div></div><div data-difftype="0" data-currentmodifiedline="239" data-line-start="239" data-line-end="239" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">tertiaryText</span><span class="mtk1">)</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="175" data-currentmodifiedline="240" data-line-start="175" data-line-end="175" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">            }</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="176" data-line-start="176" data-line-end="176" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">            .</span><span class="mtk7">font</span><span class="mtk1">(ScopyTypography.</span><span class="mtk3">caption</span><span class="mtk1">)</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="241" data-line-start="241" data-line-end="241" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            .</span><span class="mtk7">font</span><span class="mtk1">(.</span><span class="mtk7">system</span><span class="mtk1">(</span><span class="mtk7">size</span><span class="mtk1">: </span><span class="mtk5">13</span><span class="mtk1">))</span></div></div><div data-difftype="0" data-currentmodifiedline="242" data-line-start="242" data-line-end="242" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">mutedText</span><span class="mtk1">)</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="177" data-currentmodifiedline="243" data-line-start="177" data-line-end="177" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        }</span></div></div><div data-difftype="2" data-currentoriginalline="178" data-currentmodifiedline="244" data-line-start="178" data-line-end="178" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        .</span><span class="mtk7">menuStyle</span><span class="mtk1">(.</span><span class="mtk3">borderlessButton</span><span class="mtk1">)</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="179" data-line-start="179" data-line-end="179" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">        .</span><span class="mtk7">buttonStyle</span><span class="mtk1">(</span><span class="mtk7">CapsuleFilterButtonStyle</span><span class="mtk1">(</span><span class="mtk7">isActive</span><span class="mtk1">: appState.</span><span class="mtk3">typeFilter</span><span class="mtk1"> != </span><span class="mtk5">nil</span><span class="mtk1">))</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="180" data-currentmodifiedline="245" data-line-start="180" data-line-end="180" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        .</span><span class="mtk7">help</span><span class="mtk1">(</span><span class="mtk9">"Filter by type"</span><span class="mtk1">)</span></div></div><div data-difftype="2" data-currentoriginalline="181" data-currentmodifiedline="246" data-line-start="181" data-line-end="181" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">    }</span></div></div><div data-difftype="2" data-currentoriginalline="182" data-currentmodifiedline="247" data-line-start="182" data-line-end="182" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div></div><div><div data-difftype="2" data-currentoriginalline="195" data-currentmodifiedline="260" data-line-start="195" data-line-end="195" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        }</span></div></div><div data-difftype="2" data-currentoriginalline="196" data-currentmodifiedline="261" data-line-start="196" data-line-end="196" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">    }</span></div></div><div data-difftype="2" data-currentoriginalline="197" data-currentmodifiedline="262" data-line-start="197" data-line-end="197" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="198" data-line-start="198" data-line-end="198" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">private</span><span class="mtk1"></span><span class="mtk4">func</span><span class="mtk1"></span><span class="mtk7">typeLabel</span><span class="mtk1">(</span><span class="mtk7">_</span><span class="mtk1"></span><span class="mtk1 mtki">type</span><span class="mtk1">: ClipboardItemType?) -> </span><span class="mtk6">String</span><span class="mtk1"> {</span></div></div><div data-difftype="1" data-currentoriginalline="199" data-line-start="199" data-line-end="199" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">guard</span><span class="mtk1"></span><span class="mtk4">let</span><span class="mtk1"> type </span><span class="mtk4">else</span><span class="mtk1"> { </span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk9">"All Types"</span><span class="mtk1"> }</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="263" data-line-start="263" data-line-end="263" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">private</span><span class="mtk1"></span><span class="mtk4">func</span><span class="mtk1"></span><span class="mtk7">typeIcon</span><span class="mtk1">(</span><span class="mtk7">_</span><span class="mtk1"></span><span class="mtk1 mtki">type</span><span class="mtk1">: ClipboardItemType?) -> </span><span class="mtk6">String</span><span class="mtk1"> {</span></div></div><div data-difftype="0" data-currentmodifiedline="264" data-line-start="264" data-line-end="264" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">guard</span><span class="mtk1"></span><span class="mtk4">let</span><span class="mtk1"> type </span><span class="mtk4">else</span><span class="mtk1"> { </span><span class="mtk4">return</span><span class="mtk1"> ScopyIcons.</span><span class="mtk3">filterType</span><span class="mtk1"> }</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="200" data-currentmodifiedline="265" data-line-start="200" data-line-end="200" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">switch</span><span class="mtk1"> type {</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="201" data-line-start="201" data-line-end="201" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">case</span><span class="mtk1"> .text</span><span class="mtk4">:</span><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk9">"Text"</span></div></div><div data-difftype="1" data-currentoriginalline="202" data-line-start="202" data-line-end="202" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">case</span><span class="mtk1"> .image</span><span class="mtk4">:</span><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk9">"Image"</span></div></div><div data-difftype="1" data-currentoriginalline="203" data-line-start="203" data-line-end="203" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">case</span><span class="mtk1"> .</span><span class="mtk3">file</span><span class="mtk4">:</span><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk9">"File"</span></div></div><div data-difftype="1" data-currentoriginalline="204" data-line-start="204" data-line-end="204" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">default:</span><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk9">"All Types"</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="266" data-line-start="266" data-line-end="266" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">case</span><span class="mtk1"> .text</span><span class="mtk4">:</span><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk9">"doc.text"</span></div></div><div data-difftype="0" data-currentmodifiedline="267" data-line-start="267" data-line-end="267" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">case</span><span class="mtk1"> .image</span><span class="mtk4">:</span><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk9">"photo"</span></div></div><div data-difftype="0" data-currentmodifiedline="268" data-line-start="268" data-line-end="268" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">case</span><span class="mtk1"> .</span><span class="mtk3">file</span><span class="mtk4">:</span><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"></span><span class="mtk9">"doc.fill"</span></div></div><div data-difftype="0" data-currentmodifiedline="269" data-line-start="269" data-line-end="269" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">default:</span><span class="mtk1"></span><span class="mtk4">return</span><span class="mtk1"> ScopyIcons.</span><span class="mtk3">filterType</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="205" data-currentmodifiedline="270" data-line-start="205" data-line-end="205" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        }</span></div></div><div data-difftype="2" data-currentoriginalline="206" data-currentmodifiedline="271" data-line-start="206" data-line-end="206" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">    }</span></div></div><div data-difftype="2" data-currentoriginalline="207" data-currentmodifiedline="272" data-line-start="207" data-line-end="207" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">}</span></div></div><div data-difftype="2" data-currentoriginalline="208" data-currentmodifiedline="273" data-line-start="208" data-line-end="208" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="209" data-line-start="209" data-line-end="209" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk13 mtki">/// 搜索框视图</span></div></div><div data-difftype="1" data-currentoriginalline="210" data-line-start="210" data-line-end="210" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk4">struct</span><span class="mtk1"></span><span class="mtk6">SearchFieldView</span><span class="mtk1">: </span><span class="mtk6">View </span><span class="mtk1">{</span></div></div><div data-difftype="1" data-currentoriginalline="211" data-line-start="211" data-line-end="211" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">@Binding</span><span class="mtk1"></span><span class="mtk4">var</span><span class="mtk1"> query: </span><span class="mtk6">String</span></div></div><div data-difftype="1" data-currentoriginalline="212" data-line-start="212" data-line-end="212" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">@FocusState</span><span class="mtk1">.</span><span class="mtk3">Binding</span><span class="mtk1"></span><span class="mtk4">var</span><span class="mtk1"> searchFocused: </span><span class="mtk6">Bool</span></div></div><div data-difftype="1" data-currentoriginalline="213" data-line-start="213" data-line-end="213" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="1" data-currentoriginalline="214" data-line-start="214" data-line-end="214" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">@Environment</span><span class="mtk1">(AppState.</span><span class="mtk4">self</span><span class="mtk1">) </span><span class="mtk4">private</span><span class="mtk1"></span><span class="mtk4">var</span><span class="mtk1"> appState</span></div></div><div data-difftype="1" data-currentoriginalline="215" data-line-start="215" data-line-end="215" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="1" data-currentoriginalline="216" data-line-start="216" data-line-end="216" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">var</span><span class="mtk1"> body: </span><span class="mtk4">some</span><span class="mtk1"> View {</span></div></div><div data-difftype="1" data-currentoriginalline="217" data-line-start="217" data-line-end="217" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">ZStack</span><span class="mtk1"> {</span></div></div><div data-difftype="1" data-currentoriginalline="218" data-line-start="218" data-line-end="218" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">RoundedRectangle</span><span class="mtk1">(</span><span class="mtk7">cornerRadius</span><span class="mtk1">: </span><span class="mtk5">7</span><span class="mtk1">, </span><span class="mtk7">style</span><span class="mtk1">: .</span><span class="mtk3">continuous</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="219" data-line-start="219" data-line-end="219" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                .</span><span class="mtk7">fill</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">secondaryBackground</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="220" data-line-start="220" data-line-end="220" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                .</span><span class="mtk7">overlay</span><span class="mtk1">(</span></div></div><div data-difftype="1" data-currentoriginalline="221" data-line-start="221" data-line-end="221" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">RoundedRectangle</span><span class="mtk1">(</span><span class="mtk7">cornerRadius</span><span class="mtk1">: </span><span class="mtk5">7</span><span class="mtk1">, </span><span class="mtk7">style</span><span class="mtk1">: .</span><span class="mtk3">continuous</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="222" data-line-start="222" data-line-end="222" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                        .</span><span class="mtk7">stroke</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">separator</span><span class="mtk1">.</span><span class="mtk7">opacity</span><span class="mtk1">(</span><span class="mtk5">0.8</span><span class="mtk1">), </span><span class="mtk7">lineWidth</span><span class="mtk1">: </span><span class="mtk5">0.8</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="223" data-line-start="223" data-line-end="223" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                )</span></div></div><div data-difftype="1" data-currentoriginalline="224" data-line-start="224" data-line-end="224" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                .</span><span class="mtk7">frame</span><span class="mtk1">(</span><span class="mtk7">height</span><span class="mtk1">: </span><span class="mtk5">28</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="225" data-line-start="225" data-line-end="225" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="1" data-currentoriginalline="226" data-line-start="226" data-line-end="226" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: ScopySpacing.</span><span class="mtk3">sm</span><span class="mtk1">) {</span></div></div><div data-difftype="1" data-currentoriginalline="227" data-line-start="227" data-line-end="227" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">systemName</span><span class="mtk1">: ScopyIcons.</span><span class="mtk3">search</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="228" data-line-start="228" data-line-end="228" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">mutedText</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="229" data-line-start="229" data-line-end="229" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">padding</span><span class="mtk1">(.</span><span class="mtk3">leading</span><span class="mtk1">, ScopySpacing.</span><span class="mtk3">sm</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="230" data-line-start="230" data-line-end="230" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="1" data-currentoriginalline="231" data-line-start="231" data-line-end="231" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">TextField</span><span class="mtk1">(</span><span class="mtk9">"Search..."</span><span class="mtk1">, </span><span class="mtk7">text</span><span class="mtk1">: $query)</span></div></div><div data-difftype="1" data-currentoriginalline="232" data-line-start="232" data-line-end="232" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">disableAutocorrection</span><span class="mtk1">(</span><span class="mtk5">true</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="233" data-line-start="233" data-line-end="233" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">lineLimit</span><span class="mtk1">(</span><span class="mtk5">1</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="234" data-line-start="234" data-line-end="234" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">textFieldStyle</span><span class="mtk1">(.</span><span class="mtk3">plain</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="235" data-line-start="235" data-line-end="235" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">font</span><span class="mtk1">(ScopyTypography.</span><span class="mtk3">body</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="236" data-line-start="236" data-line-end="236" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">focused</span><span class="mtk1">($searchFocused)</span></div></div><div data-difftype="1" data-currentoriginalline="237" data-line-start="237" data-line-end="237" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">onChange</span><span class="mtk1">(</span><span class="mtk7">of</span><span class="mtk1">: query) {</span></div></div><div data-difftype="1" data-currentoriginalline="238" data-line-start="238" data-line-end="238" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                        appState.</span><span class="mtk7">search</span><span class="mtk1">()</span></div></div><div data-difftype="1" data-currentoriginalline="239" data-line-start="239" data-line-end="239" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    }</span></div></div><div data-difftype="1" data-currentoriginalline="240" data-line-start="240" data-line-end="240" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">onSubmit</span><span class="mtk1"> {</span></div></div><div data-difftype="1" data-currentoriginalline="241" data-line-start="241" data-line-end="241" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Task</span><span class="mtk1"> { </span><span class="mtk4">await</span><span class="mtk1"> appState.</span><span class="mtk7">selectCurrent</span><span class="mtk1">() }</span></div></div><div data-difftype="1" data-currentoriginalline="242" data-line-start="242" data-line-end="242" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    }</span></div></div><div data-difftype="1" data-currentoriginalline="243" data-line-start="243" data-line-end="243" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="1" data-currentoriginalline="244" data-line-start="244" data-line-end="244" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">if</span><span class="mtk1"> !query.isEmpty {</span></div></div><div data-difftype="1" data-currentoriginalline="245" data-line-start="245" data-line-end="245" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Button</span><span class="mtk1"> {</span></div></div><div data-difftype="1" data-currentoriginalline="246" data-line-start="246" data-line-end="246" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                        query = </span><span class="mtk9">""</span></div></div><div data-difftype="1" data-currentoriginalline="247" data-line-start="247" data-line-end="247" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                        appState.</span><span class="mtk7">search</span><span class="mtk1">()</span></div></div><div data-difftype="1" data-currentoriginalline="248" data-line-start="248" data-line-end="248" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    } </span><span class="mtk7">label</span><span class="mtk1">: {</span></div></div><div data-difftype="1" data-currentoriginalline="249" data-line-start="249" data-line-end="249" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">systemName</span><span class="mtk1">: ScopyIcons.</span><span class="mtk3">clear</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="250" data-line-start="250" data-line-end="250" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                            .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">mutedText</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="251" data-line-start="251" data-line-end="251" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                            .</span><span class="mtk7">padding</span><span class="mtk1">(.</span><span class="mtk3">trailing</span><span class="mtk1">, ScopySpacing.</span><span class="mtk3">sm</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="252" data-line-start="252" data-line-end="252" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    }</span></div></div><div data-difftype="1" data-currentoriginalline="253" data-line-start="253" data-line-end="253" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">buttonStyle</span><span class="mtk1">(.</span><span class="mtk3">plain</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="254" data-line-start="254" data-line-end="254" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                }</span></div></div><div data-difftype="1" data-currentoriginalline="255" data-line-start="255" data-line-end="255" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">            }</span></div></div><div data-difftype="1" data-currentoriginalline="256" data-line-start="256" data-line-end="256" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">        }</span></div></div><div data-difftype="1" data-currentoriginalline="257" data-line-start="257" data-line-end="257" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">    }</span></div></div><div data-difftype="1" data-currentoriginalline="258" data-line-start="258" data-line-end="258" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">}</span></div></div></div></div></div></div></pre>

 **Key Technical Details** :

* Icon size: 13x13 points (matches 13pt font for visual balance)
* Antialiasing enabled for crisp display
* High interpolation quality for smooth scaling

---

### 2. Footer Redesign -

FooterView.swift

#### Problem

Footer felt disconnected from main content with semi-transparent background creating visual separation. Lack of semantic grouping between status info and action buttons.

#### Solution

Redesigned footer with:

* **Subtle Separator** : Replaced solid background with translucent divider (30% opacity)
* **Clean Status Text** : Removed capsule background for a cleaner look, fixed text wrapping with `.lineLimit(1)`
* **Refined Buttons** : Reduced padding (4px → 3px), consistent 12pt icons, subtle hover states
* **Tighter Integration** : Reduced vertical padding (`.sm` → `.xs`)

<pre><div node="[object Object]" class="relative whitespace-pre-wrap word-break-all p-3 my-2 rounded-sm bg-list-hover-subtle"><div class="font-mono text-xs"><div><div><div><div data-difftype="2" data-currentoriginalline="1" data-currentmodifiedline="1" data-line-start="1" data-line-end="1" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk4">import</span><span class="mtk1"></span><span class="mtk6">SwiftUI</span></div></div><div data-difftype="2" data-currentoriginalline="2" data-currentmodifiedline="2" data-line-start="2" data-line-end="2" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div><div data-difftype="2" data-currentoriginalline="3" data-currentmodifiedline="3" data-line-start="3" data-line-end="3" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk13 mtki">/// 底部状态栏视图</span></div></div></div><div><div data-difftype="2" data-currentoriginalline="17" data-currentmodifiedline="17" data-line-start="17" data-line-end="17" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div><div data-difftype="2" data-currentoriginalline="18" data-currentmodifiedline="18" data-line-start="18" data-line-end="18" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">var</span><span class="mtk1"> body: </span><span class="mtk4">some</span><span class="mtk1"> View {</span></div></div><div data-difftype="2" data-currentoriginalline="19" data-currentmodifiedline="19" data-line-start="19" data-line-end="19" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">VStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: </span><span class="mtk5">0</span><span class="mtk1">) {</span></div></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="20" data-line-start="20" data-line-end="20" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk13 mtki">// Subtle top separator</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="20" data-currentmodifiedline="21" data-line-start="20" data-line-end="20" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">Divider</span><span class="mtk1">()</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="21" data-line-start="21" data-line-end="21" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                .</span><span class="mtk7">padding</span><span class="mtk1">(.</span><span class="mtk3">horizontal</span><span class="mtk1">, ScopySpacing.</span><span class="mtk3">md</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="22" data-line-start="22" data-line-end="22" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                .</span><span class="mtk7">padding</span><span class="mtk1">(.</span><span class="mtk3">vertical</span><span class="mtk1">, ScopySpacing.</span><span class="mtk3">sm</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="23" data-line-start="23" data-line-end="23" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="1" data-currentoriginalline="24" data-line-start="24" data-line-end="24" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1"> {</span></div></div><div data-difftype="1" data-currentoriginalline="25" data-line-start="25" data-line-end="25" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">VStack</span><span class="mtk1">(</span><span class="mtk7">alignment</span><span class="mtk1">: .</span><span class="mtk3">leading</span><span class="mtk1">, </span><span class="mtk7">spacing</span><span class="mtk1">: ScopySpacing.</span><span class="mtk3">xs</span><span class="mtk1">) {</span></div></div><div data-difftype="1" data-currentoriginalline="26" data-line-start="26" data-line-end="26" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: ScopySpacing.</span><span class="mtk3">xs</span><span class="mtk1">) {</span></div></div><div data-difftype="1" data-currentoriginalline="27" data-line-start="27" data-line-end="27" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Text</span><span class="mtk1">(summaryText)</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="22" data-line-start="22" data-line-end="22" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                .</span><span class="mtk7">background</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">separator</span><span class="mtk1">.</span><span class="mtk7">opacity</span><span class="mtk1">(</span><span class="mtk5">0.3</span><span class="mtk1">))</span></div></div><div data-difftype="0" data-currentmodifiedline="23" data-line-start="23" data-line-end="23" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="0" data-currentmodifiedline="24" data-line-start="24" data-line-end="24" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: ScopySpacing.</span><span class="mtk3">md</span><span class="mtk1">) {</span></div></div><div data-difftype="0" data-currentmodifiedline="25" data-line-start="25" data-line-end="25" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk13 mtki">// Status Info - clean text without container</span></div></div><div data-difftype="0" data-currentmodifiedline="26" data-line-start="26" data-line-end="26" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: ScopySpacing.</span><span class="mtk3">sm</span><span class="mtk1">) {</span></div></div><div data-difftype="0" data-currentmodifiedline="27" data-line-start="27" data-line-end="27" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Text</span><span class="mtk1">(summaryText)</span></div></div><div data-difftype="0" data-currentmodifiedline="28" data-line-start="28" data-line-end="28" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                        .</span><span class="mtk7">monospacedDigit</span><span class="mtk1">()</span></div></div><div data-difftype="0" data-currentmodifiedline="29" data-line-start="29" data-line-end="29" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                        .</span><span class="mtk7">lineLimit</span><span class="mtk1">(</span><span class="mtk5">1</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="30" data-line-start="30" data-line-end="30" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                        .</span><span class="mtk7">fixedSize</span><span class="mtk1">()</span></div></div><div data-difftype="0" data-currentmodifiedline="31" data-line-start="31" data-line-end="31" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Text</span><span class="mtk1">(</span><span class="mtk9">"·"</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="32" data-line-start="32" data-line-end="32" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Text</span><span class="mtk1">(appState.</span><span class="mtk3">storageSizeText</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="33" data-line-start="33" data-line-end="33" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                        .</span><span class="mtk7">lineLimit</span><span class="mtk1">(</span><span class="mtk5">1</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="34" data-line-start="34" data-line-end="34" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                        .</span><span class="mtk7">fixedSize</span><span class="mtk1">()</span></div></div><div data-difftype="0" data-currentmodifiedline="35" data-line-start="35" data-line-end="35" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="0" data-currentmodifiedline="36" data-line-start="36" data-line-end="36" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">if</span><span class="mtk1"> appState.canLoadMore && !appState.searchQuery.isEmpty {</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="28" data-currentmodifiedline="37" data-line-start="28" data-line-end="28" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">Text</span><span class="mtk1">(</span><span class="mtk9">"·"</span><span class="mtk1">)</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="29" data-line-start="29" data-line-end="29" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Text</span><span class="mtk1">(appState.</span><span class="mtk3">storageSizeText</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="30" data-line-start="30" data-line-end="30" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">if</span><span class="mtk1"> appState.canLoadMore && !appState.searchQuery.isEmpty {</span></div></div><div data-difftype="1" data-currentoriginalline="31" data-line-start="31" data-line-end="31" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Text</span><span class="mtk1">(</span><span class="mtk9">"·"</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="32" data-line-start="32" data-line-end="32" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">if</span><span class="mtk1"> appState.isLoading {</span></div></div><div data-difftype="1" data-currentoriginalline="33" data-line-start="33" data-line-end="33" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">ProgressView</span><span class="mtk1">()</span></div></div><div data-difftype="1" data-currentoriginalline="34" data-line-start="34" data-line-end="34" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                                    .</span><span class="mtk7">controlSize</span><span class="mtk1">(.</span><span class="mtk3">mini</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="35" data-line-start="35" data-line-end="35" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                            } </span><span class="mtk4">else</span><span class="mtk1"> {</span></div></div><div data-difftype="1" data-currentoriginalline="36" data-line-start="36" data-line-end="36" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Button</span><span class="mtk1">(</span><span class="mtk9">"Load more"</span><span class="mtk1">) {</span></div></div><div data-difftype="1" data-currentoriginalline="37" data-line-start="37" data-line-end="37" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Task</span><span class="mtk1"> { </span><span class="mtk4">await</span><span class="mtk1"> appState.</span><span class="mtk7">loadMore</span><span class="mtk1">() }</span></div></div><div data-difftype="1" data-currentoriginalline="38" data-line-start="38" data-line-end="38" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                                }</span></div></div><div data-difftype="1" data-currentoriginalline="39" data-line-start="39" data-line-end="39" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                                .</span><span class="mtk7">buttonStyle</span><span class="mtk1">(.</span><span class="mtk3">plain</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="40" data-line-start="40" data-line-end="40" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                                .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(Color.</span><span class="mtk3">accentColor</span><span class="mtk1">)</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="38" data-line-start="38" data-line-end="38" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk4">if</span><span class="mtk1"> appState.isLoading {</span></div></div><div data-difftype="0" data-currentmodifiedline="39" data-line-start="39" data-line-end="39" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">ProgressView</span><span class="mtk1">()</span></div></div><div data-difftype="0" data-currentmodifiedline="40" data-line-start="40" data-line-end="40" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                                .</span><span class="mtk7">controlSize</span><span class="mtk1">(.</span><span class="mtk3">mini</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="41" data-line-start="41" data-line-end="41" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                        } </span><span class="mtk4">else</span><span class="mtk1"> {</span></div></div><div data-difftype="0" data-currentmodifiedline="42" data-line-start="42" data-line-end="42" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Button</span><span class="mtk1">(</span><span class="mtk9">"Load more"</span><span class="mtk1">) {</span></div></div><div data-difftype="0" data-currentmodifiedline="43" data-line-start="43" data-line-end="43" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">Task</span><span class="mtk1"> { </span><span class="mtk4">await</span><span class="mtk1"> appState.</span><span class="mtk7">loadMore</span><span class="mtk1">() }</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="41" data-currentmodifiedline="44" data-line-start="41" data-line-end="41" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">                            }</span></div></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="45" data-line-start="45" data-line-end="45" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                            .</span><span class="mtk7">buttonStyle</span><span class="mtk1">(.</span><span class="mtk3">plain</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="46" data-line-start="46" data-line-end="46" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                            .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">accent</span><span class="mtk1">)</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="42" data-currentmodifiedline="47" data-line-start="42" data-line-end="42" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">                        }</span></div></div><div data-difftype="2" data-currentoriginalline="43" data-currentmodifiedline="48" data-line-start="43" data-line-end="43" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">                    }</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="44" data-line-start="44" data-line-end="44" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">font</span><span class="mtk1">(ScopyTypography.</span><span class="mtk3">microMono</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="45" data-line-start="45" data-line-end="45" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">mutedText</span><span class="mtk1">)</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="46" data-currentmodifiedline="49" data-line-start="46" data-line-end="46" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">                }</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="47" data-line-start="47" data-line-end="47" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="50" data-line-start="50" data-line-end="50" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                .</span><span class="mtk7">font</span><span class="mtk1">(ScopyTypography.</span><span class="mtk3">microMono</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="51" data-line-start="51" data-line-end="51" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">tertiaryText</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="52" data-line-start="52" data-line-end="52" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="48" data-currentmodifiedline="53" data-line-start="48" data-line-end="48" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">Spacer</span><span class="mtk1">()</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="49" data-line-start="49" data-line-end="49" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="1" data-currentoriginalline="50" data-line-start="50" data-line-end="50" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: ScopySpacing.</span><span class="mtk3">md</span><span class="mtk1">) {</span></div></div><div data-difftype="1" data-currentoriginalline="51" data-line-start="51" data-line-end="51" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">FooterButton</span><span class="mtk1">(</span><span class="mtk7">title</span><span class="mtk1">: </span><span class="mtk9">"Clear"</span><span class="mtk1">, </span><span class="mtk7">icon</span><span class="mtk1">: </span><span class="mtk9">"trash"</span><span class="mtk1">, </span><span class="mtk7">shortcut</span><span class="mtk1">: </span><span class="mtk9">"⌘⌫"</span><span class="mtk1">) {</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="54" data-line-start="54" data-line-end="54" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="0" data-currentmodifiedline="55" data-line-start="55" data-line-end="55" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk13 mtki">// Action Buttons - refined styling</span></div></div><div data-difftype="0" data-currentmodifiedline="56" data-line-start="56" data-line-end="56" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">HStack</span><span class="mtk1">(</span><span class="mtk7">spacing</span><span class="mtk1">: ScopySpacing.</span><span class="mtk3">xs</span><span class="mtk1">) {</span></div></div><div data-difftype="0" data-currentmodifiedline="57" data-line-start="57" data-line-end="57" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">FooterButton</span><span class="mtk1">(</span><span class="mtk7">icon</span><span class="mtk1">: </span><span class="mtk9">"trash"</span><span class="mtk1">, </span><span class="mtk7">shortcut</span><span class="mtk1">: </span><span class="mtk9">"⌘⌫"</span><span class="mtk1">) {</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="52" data-currentmodifiedline="58" data-line-start="52" data-line-end="52" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">                        showClearConfirmation = </span><span class="mtk5">true</span></div></div><div data-difftype="2" data-currentoriginalline="53" data-currentmodifiedline="59" data-line-start="53" data-line-end="53" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">                    }</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="54" data-line-start="54" data-line-end="54" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="1" data-currentoriginalline="55" data-line-start="55" data-line-end="55" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">FooterButton</span><span class="mtk1">(</span><span class="mtk7">title</span><span class="mtk1">: </span><span class="mtk9">"Settings"</span><span class="mtk1">, </span><span class="mtk7">icon</span><span class="mtk1">: </span><span class="mtk9">"gearshape"</span><span class="mtk1">, </span><span class="mtk7">shortcut</span><span class="mtk1">: </span><span class="mtk9">"⌘,"</span><span class="mtk1">) {</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="60" data-line-start="60" data-line-end="60" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">help</span><span class="mtk1">(</span><span class="mtk9">"Clear All"</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="61" data-line-start="61" data-line-end="61" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="0" data-currentmodifiedline="62" data-line-start="62" data-line-end="62" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">FooterButton</span><span class="mtk1">(</span><span class="mtk7">icon</span><span class="mtk1">: </span><span class="mtk9">"gearshape"</span><span class="mtk1">, </span><span class="mtk7">shortcut</span><span class="mtk1">: </span><span class="mtk9">"⌘,"</span><span class="mtk1">) {</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="56" data-currentmodifiedline="63" data-line-start="56" data-line-end="56" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">                        appState.</span><span class="mtk3">openSettingsHandler</span><span class="mtk1">?()</span></div></div><div data-difftype="2" data-currentoriginalline="57" data-currentmodifiedline="64" data-line-start="57" data-line-end="57" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">                    }</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="58" data-line-start="58" data-line-end="58" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="1" data-currentoriginalline="59" data-line-start="59" data-line-end="59" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">FooterButton</span><span class="mtk1">(</span><span class="mtk7">title</span><span class="mtk1">: </span><span class="mtk9">"Quit"</span><span class="mtk1">, </span><span class="mtk7">icon</span><span class="mtk1">: </span><span class="mtk9">"power"</span><span class="mtk1">, </span><span class="mtk7">shortcut</span><span class="mtk1">: </span><span class="mtk9">"⌘Q"</span><span class="mtk1">) {</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="65" data-line-start="65" data-line-end="65" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">help</span><span class="mtk1">(</span><span class="mtk9">"Settings"</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="66" data-line-start="66" data-line-end="66" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span></div></div><div data-difftype="0" data-currentmodifiedline="67" data-line-start="67" data-line-end="67" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1"></span><span class="mtk7">FooterButton</span><span class="mtk1">(</span><span class="mtk7">icon</span><span class="mtk1">: </span><span class="mtk9">"power"</span><span class="mtk1">, </span><span class="mtk7">shortcut</span><span class="mtk1">: </span><span class="mtk9">"⌘Q"</span><span class="mtk1">) {</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="60" data-currentmodifiedline="68" data-line-start="60" data-line-end="60" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">                        NSApp.</span><span class="mtk7">terminate</span><span class="mtk1">(</span><span class="mtk5">nil</span><span class="mtk1">)</span></div></div><div data-difftype="2" data-currentoriginalline="61" data-currentmodifiedline="69" data-line-start="61" data-line-end="61" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">                    }</span></div></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="70" data-line-start="70" data-line-end="70" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">help</span><span class="mtk1">(</span><span class="mtk9">"Quit"</span><span class="mtk1">)</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="62" data-currentmodifiedline="71" data-line-start="62" data-line-end="62" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">                }</span></div></div><div data-difftype="2" data-currentoriginalline="63" data-currentmodifiedline="72" data-line-start="63" data-line-end="63" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">            }</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="64" data-line-start="64" data-line-end="64" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">            .</span><span class="mtk7">padding</span><span class="mtk1">(.</span><span class="mtk3">horizontal</span><span class="mtk1">, ScopySpacing.</span><span class="mtk3">md</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="65" data-line-start="65" data-line-end="65" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">            .</span><span class="mtk7">padding</span><span class="mtk1">(.</span><span class="mtk3">bottom</span><span class="mtk1">, ScopySpacing.</span><span class="mtk3">sm</span><span class="mtk1">)</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="73" data-line-start="73" data-line-end="73" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            .</span><span class="mtk7">padding</span><span class="mtk1">(.</span><span class="mtk3">horizontal</span><span class="mtk1">, ScopySpacing.</span><span class="mtk3">lg</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="74" data-line-start="74" data-line-end="74" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            .</span><span class="mtk7">padding</span><span class="mtk1">(.</span><span class="mtk3">vertical</span><span class="mtk1">, ScopySpacing.</span><span class="mtk3">xs</span><span class="mtk1">)</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="66" data-currentmodifiedline="75" data-line-start="66" data-line-end="66" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        }</span></div></div><div data-difftype="2" data-currentoriginalline="67" data-currentmodifiedline="76" data-line-start="67" data-line-end="67" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        .</span><span class="mtk7">alert</span><span class="mtk1">(</span><span class="mtk9">"Clear All History?"</span><span class="mtk1">, </span><span class="mtk7">isPresented</span><span class="mtk1">: $showClearConfirmation) {</span></div></div><div data-difftype="2" data-currentoriginalline="68" data-currentmodifiedline="77" data-line-start="68" data-line-end="68" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">Button</span><span class="mtk1">(</span><span class="mtk9">"Cancel"</span><span class="mtk1">, </span><span class="mtk7">role</span><span class="mtk1">: .</span><span class="mtk3">cancel</span><span class="mtk1">) { }</span></div></div><div data-difftype="2" data-currentoriginalline="69" data-currentmodifiedline="78" data-line-start="69" data-line-end="69" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">Button</span><span class="mtk1">(</span><span class="mtk9">"Clear"</span><span class="mtk1">, </span><span class="mtk7">role</span><span class="mtk1">: .</span><span class="mtk3">destructive</span><span class="mtk1">) {</span></div></div><div data-difftype="2" data-currentoriginalline="70" data-currentmodifiedline="79" data-line-start="70" data-line-end="70" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">Task</span><span class="mtk1"> { </span><span class="mtk4">await</span><span class="mtk1"> appState.</span><span class="mtk7">clearAll</span><span class="mtk1">() }</span></div></div><div data-difftype="2" data-currentoriginalline="71" data-currentmodifiedline="80" data-line-start="71" data-line-end="71" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">            }</span></div></div><div data-difftype="2" data-currentoriginalline="72" data-currentmodifiedline="81" data-line-start="72" data-line-end="72" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        } </span><span class="mtk7">message</span><span class="mtk1">: {</span></div></div><div data-difftype="2" data-currentoriginalline="73" data-currentmodifiedline="82" data-line-start="73" data-line-end="73" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">Text</span><span class="mtk1">(</span><span class="mtk9">"This will permanently delete all </span><span class="mtk4">\(</span><span class="mtk1">appState.</span><span class="mtk3">totalCount</span><span class="mtk4">)</span><span class="mtk9"> items. This action cannot be undone."</span><span class="mtk1">)</span></div></div><div data-difftype="2" data-currentoriginalline="74" data-currentmodifiedline="83" data-line-start="74" data-line-end="74" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        }</span></div></div><div data-difftype="2" data-currentoriginalline="75" data-currentmodifiedline="84" data-line-start="75" data-line-end="75" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">    }</span></div></div><div data-difftype="2" data-currentoriginalline="76" data-currentmodifiedline="85" data-line-start="76" data-line-end="76" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">}</span></div></div><div data-difftype="2" data-currentoriginalline="77" data-currentmodifiedline="86" data-line-start="77" data-line-end="77" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="78" data-line-start="78" data-line-end="78" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk13 mtki">/// 底部按钮组件</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="87" data-line-start="87" data-line-end="87" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk13 mtki">/// 底部按钮组件 - 仅图标 + 快捷键</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="79" data-currentmodifiedline="88" data-line-start="79" data-line-end="79" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk4">struct</span><span class="mtk1"></span><span class="mtk6">FooterButton</span><span class="mtk1">: </span><span class="mtk6">View </span><span class="mtk1">{</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="80" data-line-start="80" data-line-end="80" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk4">let</span><span class="mtk1"> title: </span><span class="mtk6">String</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="81" data-currentmodifiedline="89" data-line-start="81" data-line-end="81" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">let</span><span class="mtk1"> icon: </span><span class="mtk6">String</span></div></div><div data-difftype="2" data-currentoriginalline="82" data-currentmodifiedline="90" data-line-start="82" data-line-end="82" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">let</span><span class="mtk1"> shortcut: </span><span class="mtk6">String</span></div></div><div data-difftype="2" data-currentoriginalline="83" data-currentmodifiedline="91" data-line-start="83" data-line-end="83" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">let</span><span class="mtk1"> action: () -> </span><span class="mtk6">Void</span></div></div><div data-difftype="2" data-currentoriginalline="84" data-currentmodifiedline="92" data-line-start="84" data-line-end="84" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div><div data-difftype="2" data-currentoriginalline="85" data-currentmodifiedline="93" data-line-start="85" data-line-end="85" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">@State</span><span class="mtk1"></span><span class="mtk4">private</span><span class="mtk1"></span><span class="mtk4">var</span><span class="mtk1"> isHovered = </span><span class="mtk5">false</span></div></div><div data-difftype="2" data-currentoriginalline="86" data-currentmodifiedline="94" data-line-start="86" data-line-end="86" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span></div></div><div data-difftype="2" data-currentoriginalline="87" data-currentmodifiedline="95" data-line-start="87" data-line-end="87" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk4">var</span><span class="mtk1"> body: </span><span class="mtk4">some</span><span class="mtk1"> View {</span></div></div><div data-difftype="2" data-currentoriginalline="88" data-currentmodifiedline="96" data-line-start="88" data-line-end="88" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">Button</span><span class="mtk1">(</span><span class="mtk7">action</span><span class="mtk1">: action) {</span></div></div></div></div></div><div><div data-difftype="3" data-currentoriginalline="89" data-line-start="89" data-line-end="89" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1 "></span><span class="mtk7 ">HStack</span><span class="mtk1 ">(</span><span class="mtk7 ">spacing</span><span class="mtk1 ">: </span><span class="mtk5 bg-diffEditor-removedTextBackground">4</span><span class="mtk1 ">) {</span></div></div><div data-difftype="3" data-currentmodifiedline="97" data-line-start="97" data-line-end="97" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1 "></span><span class="mtk7 ">HStack</span><span class="mtk1 ">(</span><span class="mtk7 ">spacing</span><span class="mtk1 ">: </span><span class="mtk5 bg-diffEditor-insertedTextBackground">2</span><span class="mtk1 ">) {</span></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="90" data-currentmodifiedline="98" data-line-start="90" data-line-end="90" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">Image</span><span class="mtk1">(</span><span class="mtk7">systemName</span><span class="mtk1">: icon)</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="91" data-line-start="91" data-line-end="91" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1"></span><span class="mtk7">Text</span><span class="mtk1">(</span><span class="mtk7">LocalizedStringKey</span><span class="mtk1">(title))</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="99" data-line-start="99" data-line-end="99" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">font</span><span class="mtk1">(.</span><span class="mtk7">system</span><span class="mtk1">(</span><span class="mtk7">size</span><span class="mtk1">: </span><span class="mtk5">12</span><span class="mtk1">))</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="92" data-currentmodifiedline="100" data-line-start="92" data-line-end="92" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1"></span><span class="mtk7">Text</span><span class="mtk1">(shortcut)</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="93" data-line-start="93" data-line-end="93" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(.</span><span class="mtk3">secondary</span><span class="mtk1">)</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="101" data-line-start="101" data-line-end="101" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">font</span><span class="mtk1">(.</span><span class="mtk7">system</span><span class="mtk1">(</span><span class="mtk7">size</span><span class="mtk1">: </span><span class="mtk5">10</span><span class="mtk1">, </span><span class="mtk7">weight</span><span class="mtk1">: .</span><span class="mtk3">medium</span><span class="mtk1">))</span></div></div><div data-difftype="0" data-currentmodifiedline="102" data-line-start="102" data-line-end="102" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">                    .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(ScopyColors.</span><span class="mtk3">tertiaryText</span><span class="mtk1">.</span><span class="mtk7">opacity</span><span class="mtk1">(</span><span class="mtk5">0.8</span><span class="mtk1">))</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="94" data-currentmodifiedline="103" data-line-start="94" data-line-end="94" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">            }</span></div></div></div></div></div><div><div><div data-difftype="1" data-currentoriginalline="95" data-line-start="95" data-line-end="95" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">            .</span><span class="mtk7">font</span><span class="mtk1">(ScopyTypography.</span><span class="mtk3">caption</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="96" data-line-start="96" data-line-end="96" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">            .</span><span class="mtk7">padding</span><span class="mtk1">(.</span><span class="mtk3">horizontal</span><span class="mtk1">, ScopySpacing.</span><span class="mtk3">md</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="97" data-line-start="97" data-line-end="97" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">            .</span><span class="mtk7">padding</span><span class="mtk1">(.</span><span class="mtk3">vertical</span><span class="mtk1">, ScopySpacing.</span><span class="mtk3">xs</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="98" data-line-start="98" data-line-end="98" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">            .</span><span class="mtk7">background</span><span class="mtk1">(isHovered ? ScopyColors.</span><span class="mtk3">selection</span><span class="mtk1"></span><span class="mtk4">:</span><span class="mtk1"> ScopyColors.</span><span class="mtk3">secondaryBackground</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="99" data-line-start="99" data-line-end="99" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">            .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(isHovered ? Color.</span><span class="mtk3">accentColor</span><span class="mtk1"></span><span class="mtk4">:</span><span class="mtk1"> .</span><span class="mtk3">primary</span><span class="mtk1">)</span></div></div><div data-difftype="1" data-currentoriginalline="100" data-line-start="100" data-line-end="100" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-removedLineBackground"><span class="mtk1">            .</span><span class="mtk7">clipShape</span><span class="mtk1">(</span><span class="mtk7">RoundedRectangle</span><span class="mtk1">(</span><span class="mtk7">cornerRadius</span><span class="mtk1">: </span><span class="mtk5">6</span><span class="mtk1">))</span></div></div></div></div><div><div><div data-difftype="0" data-currentmodifiedline="104" data-line-start="104" data-line-end="104" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            .</span><span class="mtk7">padding</span><span class="mtk1">(.</span><span class="mtk3">horizontal</span><span class="mtk1">, </span><span class="mtk5">6</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="105" data-line-start="105" data-line-end="105" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            .</span><span class="mtk7">padding</span><span class="mtk1">(.</span><span class="mtk3">vertical</span><span class="mtk1">, </span><span class="mtk5">3</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="106" data-line-start="106" data-line-end="106" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            .</span><span class="mtk7">background</span><span class="mtk1">(isHovered ? ScopyColors.</span><span class="mtk3">secondaryBackground</span><span class="mtk1"></span><span class="mtk4">:</span><span class="mtk1"> Color.</span><span class="mtk3">clear</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="107" data-line-start="107" data-line-end="107" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            .</span><span class="mtk7">foregroundStyle</span><span class="mtk1">(isHovered ? ScopyColors.text </span><span class="mtk4">:</span><span class="mtk1"> ScopyColors.</span><span class="mtk3">mutedText</span><span class="mtk1">)</span></div></div><div data-difftype="0" data-currentmodifiedline="108" data-line-start="108" data-line-end="108" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><span class="text-editorLineNumber-foreground inline-flex mr-3 flex-shrink-0 select-none"><span class="flex-1 text-right pr-2"></span></span><div class="flex-1 pr-2 whitespace-pre-wrap bg-diffEditor-insertedLineBackground"><span class="mtk1">            .</span><span class="mtk7">clipShape</span><span class="mtk1">(</span><span class="mtk7">RoundedRectangle</span><span class="mtk1">(</span><span class="mtk7">cornerRadius</span><span class="mtk1">: </span><span class="mtk5">4</span><span class="mtk1">))</span></div></div></div></div><div><div><div><div data-difftype="2" data-currentoriginalline="101" data-currentmodifiedline="109" data-line-start="101" data-line-end="101" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        }</span></div></div><div data-difftype="2" data-currentoriginalline="102" data-currentmodifiedline="110" data-line-start="102" data-line-end="102" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        .</span><span class="mtk7">buttonStyle</span><span class="mtk1">(.</span><span class="mtk3">plain</span><span class="mtk1">)</span></div></div><div data-difftype="2" data-currentoriginalline="103" data-currentmodifiedline="111" data-line-start="103" data-line-end="103" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        .</span><span class="mtk7">onHover</span><span class="mtk1"> { hovering </span><span class="mtk4">in</span></div></div><div data-difftype="2" data-currentoriginalline="104" data-currentmodifiedline="112" data-line-start="104" data-line-end="104" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">            isHovered = hovering</span></div></div><div data-difftype="2" data-currentoriginalline="105" data-currentmodifiedline="113" data-line-start="105" data-line-end="105" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">        }</span></div></div><div data-difftype="2" data-currentoriginalline="106" data-currentmodifiedline="114" data-line-start="106" data-line-end="106" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">    }</span></div></div><div data-difftype="2" data-currentoriginalline="107" data-currentmodifiedline="115" data-line-start="107" data-line-end="107" class="code-line flex flex-nowrap gap-2 min-h-[1.2em] pr-2 select-contain"><div class="flex-1 pr-2 whitespace-pre-wrap"><span class="mtk1">}</span></div></div></div></div></div></div></div></pre>

 **Visual Structure** :

<pre><div node="[object Object]" class="relative whitespace-pre-wrap word-break-all p-3 my-2 rounded-sm bg-list-hover-subtle"><div><div class="code-block"><div class="code-line" data-line-number="1"><div class="line-content"><span class="mtk1">┌──────────────────────────────────────────────┐</span></div></div><div class="code-line" data-line-number="2"><div class="line-content"><span class="mtk1">│ [thin separator line]                        │</span></div></div><div class="code-line" data-line-number="3"><div class="line-content"><span class="mtk1">│ 45 items · 49.8 MB      🗑️⌘⌫ ⚙️⌘, ⏻⌘Q       │</span></div></div><div class="code-line" data-line-number="4"><div class="line-content"><span class="mtk1">└──────────────────────────────────────────────┘</span></div></div></div></div></div></pre>

 **Key Improvements** :

* Status info is clean text without background container
* Text wrapping prevented with `.lineLimit(1)` and `.fixedSize()`
* Footer buttons with `ScopyColors.secondaryBackground` on hover
* Separator at 30% opacity for subtlety
* Consistent 12pt icon sizing across all buttons

## Build Verification

✅  **Build Status** : Successful

* Resolved color reference error (`controlBackground` → `secondaryBackground`)
* All SwiftUI views compile without errors
* No runtime warnings

## Visual Impact

### Icon Rendering

* **Before** : 6x6 icon appeared too large due to built-in padding
* **After** : 13pt icon properly scaled without padding, balanced with surrounding UI

### Footer Cohesion

* **Before** : Semi-transparent background created floating effect
* **After** : Subtle separator and capsule grouping create integrated, native feel

## Technical Notes

NOTE

 **Icon Caching** : Custom icon rendering is called per-render. For performance optimization, consider caching rendered icons by Bundle ID if icon list is dynamic/large.

TIP

 **Color Consistency** : Used `ScopyColors.secondaryBackground` throughout for consistency with existing design system. This automatically adapts to Light/Dark mode.

## Testing Recommendations

1. **Visual Testing** :

* Verify icon size matches chevron and text visual weight
* Confirm footer separator is subtle and not distracting
* Test hover states on footer buttons

1. **Mode Testing** :

* Switch between Light/Dark modes
* Verify color adaptation for separator and backgrounds

1. **Performance** :

* Monitor icon rendering performance with multiple apps in filter list
* Consider caching strategy if performance degrades

## Next Steps

* ✅ Icon rendering fixed with custom cropping
* ✅ Footer redesigned with semantic grouping
* ✅ Build verified successfully
* 📝 User testing and feedback
