# v0.50.fix12

> çŠ¶æ€ï¼šâœ…
> è¯´æ˜ï¼šFix/Searchï¼šFuzzy/Fuzzy+ æ’åºåˆ‡æ¢æ¢å¤ç”Ÿæ•ˆï¼ˆæŒ‰æ—¶é—´/æŒ‰æ‰“åˆ†ï¼‰ï¼Œå¹¶ä¿æŒåˆ†é¡µ/ç²¾ç‚¼ä¸€è‡´æ€§ã€‚

## ğŸ“Œ ä¸€é¡µçº¸æ€»ç»“ï¼ˆWhat / Why / Resultï¼‰

### What

- Fix/Searchï¼šFuzzy/Fuzzy+ æ’åºæ”¹ä¸ºçœŸæ­£éµå¾ª sortModeï¼ˆRelevance=score ä¼˜å…ˆï¼ŒRecent=lastUsed ä¼˜å…ˆï¼‰ï¼ŒPinned å§‹ç»ˆç½®é¡¶ã€‚
- Fix/Searchï¼šçŸ­è¯é¢„ç­›ç»“æœåœ¨ Relevance ä¸‹æŒ‰ score é‡æ’ï¼Œåˆ†é¡µä»ä¿æŒç¨³å®šã€‚
- Fix/Searchï¼šåˆ†é¡µ/ç²¾ç‚¼è¯·æ±‚è¡¥é½ sortMode é€ä¼ ï¼Œé¿å…ç¿»é¡µ/äºŒæ¬¡æœç´¢æ’åºæ¼‚ç§»ã€‚

### Why

- æ’åºåˆ‡æ¢æŒ‰é’®åœ¨ Fuzzy/Fuzzy+ æ¨¡å¼ä¸‹é•¿æœŸæ— æ•ˆï¼Œæ’åºå§‹ç»ˆè¢« lastUsedAt è¦†ç›–ï¼›
  åŒæ—¶åˆ†é¡µä¸ç²¾ç‚¼è¯·æ±‚æœªå¸¦ sortModeï¼Œå¯¼è‡´åˆ‡æ¢åç»“æœé¡ºåºä¸ä¸€è‡´ã€‚

### Result

- Fuzzy/Fuzzy+ ç°åœ¨å¯åœ¨â€œæŒ‰æ—¶é—´/æŒ‰æ‰“åˆ†â€ä¹‹é—´ç¨³å®šåˆ‡æ¢ï¼Œåˆ†é¡µä¸ refine ä¿æŒä¸€è‡´ï¼›
  UI å½¢æ€ä¸å˜ï¼Œæ€§èƒ½è·¯å¾„ä¿æŒåŒé˜¶å¤æ‚åº¦ã€‚

---

## ğŸ“‚ æ ¸å¿ƒæ”¹åŠ¨

- `Scopy/Infrastructure/Search/SearchEngineImpl.swift`
  - Fuzzy æ¯”è¾ƒå™¨å¼•å…¥ sortModeï¼šRelevance=score ä¼˜å…ˆï¼ŒRecent=lastUsed ä¼˜å…ˆã€‚
  - é¢„ç­›è·¯å¾„åœ¨ Relevance ä¸‹ä½¿ç”¨è¯„åˆ†æ’åºï¼›ç¼“å­˜ key çº³å…¥ sortModeã€‚
- `Scopy/Observables/HistoryViewModel.swift`
  - loadMore/refine æœç´¢è¯·æ±‚è¡¥é½ sortModeã€‚
- `Scopy/Views/HeaderView.swift`
  - æ’åºåˆ‡æ¢æŒ‰é’®åœ¨ Fuzzy/Fuzzy+ æœ‰æŸ¥è¯¢æ—¶å¯ç”¨ï¼Œæç¤ºæ–‡æ¡ˆæ›´æ–°ã€‚
- `ScopyTests/SearchServiceTests.swift`
  - æ–°å¢ fuzzy/fuzzy+ relevance æ’åºå•æµ‹ï¼Œä¿ç•™ recent æ’åºéªŒè¯ã€‚

---

## âœ… æµ‹è¯•

- å•å…ƒæµ‹è¯•ï¼š
  - `xcodebuild test -scheme Scopy -destination 'platform=macOS' -only-testing:ScopyTests`
  - âœ… Executed 271 tests, 25 skipped, 0 failures
