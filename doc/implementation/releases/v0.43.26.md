# v0.43.26 â€” Fix/Previewï¼š`\left...\right` å…¬å¼æ›´é²æ£’ï¼ˆé¿å…è¢«æ‹†ç¢/è¯¯åŒ…è£¹ï¼‰

**æ—¥æœŸ**ï¼š2025-12-16

## ğŸ“Œ ä¸€é¡µçº¸æ€»ç»“ï¼ˆWhat / Why / Resultï¼‰

### What

- **ä¿®å¤ â€œloose `\left...\right`â€ å…¬å¼æ¸²æŸ“å¤±è´¥**ï¼šå¯¹å½¢å¦‚ `J\left(\left|...\right|\right)`ï¼ˆå¸¸è§äºè®ºæ–‡/PDF æ–‡å­—æ®µè½ã€ä½†ä¸åœ¨ `$...$` å†…ï¼‰çš„ç‰‡æ®µï¼Œå…ˆæ•´ä½“åŒ…è£¹ä¸ºä¸€ä¸ª `$...$`ï¼Œé¿å…åç»­è§„åˆ™åªåŒ…è£¹ `\mathbf{...}` è¿™ç±»å­ç‰‡æ®µå¯¼è‡´ `\left/\right` è¢«æ‹†ç¢ã€KaTeX æŠ¥é”™çº¢å­—ã€‚
- **é¿å…ä¸ç ´ç¢ `$` çš„ PDF æŠ½å–å†²çª**ï¼šå½“åŸæ–‡æœ¬å·²åŒ…å« `$...$` æ—¶ï¼Œå¯¹â€œstandalone TeX command è‡ªåŠ¨è¡¥ `$...$`â€é‡‡å–æ›´ä¿å®ˆç­–ç•¥ï¼ˆä¸å†åœ¨è¿™ç±»æ–‡æœ¬ä¸­é¢å¤–åŒ…è£¹å­¤ç«‹å‘½ä»¤ï¼‰ï¼Œé¿å…å‡ºç° `$$$...` ä¹‹ç±»çš„è¿›ä¸€æ­¥ç ´åã€‚
- **æ–°å¢å›å½’æµ‹è¯•**ï¼š
  - è‹±æ–‡è®ºæ–‡æ®µè½ï¼š`J\left(\left|...\right|\right)` å¿…é¡»è¢«æ•´ä½“åŒ…æˆä¸€ä¸ªæ•°å­¦ç‰‡æ®µã€‚
  - Wasserstein ç‰‡æ®µï¼š`$(\Omega)$` / `$(\Pi(P,Q))$` ä¿æŒåŸæ ·ï¼›`equation` ç¯å¢ƒå—å†…éƒ¨ä¸è¢«æ³¨å…¥ `$`ã€‚

### Why

- ç”¨æˆ·åé¦ˆï¼šè‹±æ–‡è®ºæ–‡æ®µè½ä¸­ `J\left(\left|\mathbf{r}_i-\mathbf{r}_j\right|\right)` ç­‰ç‰‡æ®µä»å‡ºç°çº¢è‰²é”™è¯¯ï¼ˆå…¸å‹åŸå› æ˜¯ `\left/\right` è¢«æ‹†åˆ†æˆ–ç¼ºå¤±å³ç•Œå®šç¬¦ï¼‰ã€‚

### Result

- å¯¹è®ºæ–‡/PDF å¸¸è§å†™æ³•çš„å…¬å¼è¯†åˆ«æ›´é²æ£’ï¼Œhover é¢„è§ˆä¸­ `\left...\right` ç›¸å…³çº¢å­—é”™è¯¯æ˜¾è‘—å‡å°‘ã€‚

---

## ğŸ—ï¸ å®ç°è¦ç‚¹

1. `MathNormalizer.wrapLooseLaTeX` åœ¨é `$...$` åŒºåŸŸå…ˆè¯†åˆ«å¹¶æ•´ä½“åŒ…è£¹ `\left...\right` runï¼ˆæ”¯æŒåµŒå¥—ï¼‰ã€‚
2. å¯¹å« `$` çš„æ–‡æœ¬é™ä½â€œstandalone commandâ€ è‡ªåŠ¨åŒ…è£¹å¼ºåº¦ï¼Œä¼˜å…ˆä¿è¯å·²æœ‰ `$` ç»“æ„ä¸è¢«äºŒæ¬¡ç ´åã€‚

---

## ğŸ“‚ ä¿®æ”¹æ–‡ä»¶

- `Scopy/Views/History/MathNormalizer.swift`
- `ScopyTests/MarkdownMathRenderingTests.swift`
- `doc/implementation/README.md`
- `doc/implementation/CHANGELOG.md`

---

## âœ… æµ‹è¯•ä¸æ„å»º

**æµ‹è¯•ç¯å¢ƒ**ï¼šApple M3ï¼ˆ24 GBï¼‰ / macOS 15.7.2ï¼ˆ24G325ï¼‰ / Debug / 2025-12-16

- å®šå‘å•æµ‹ï¼š`xcodebuild test -scheme Scopy -destination 'platform=macOS' -only-testing:ScopyTests/MarkdownMathRenderingTests` âœ…
- Release æ„å»ºï¼š`xcodebuild build -scheme Scopy -configuration Release -destination 'platform=macOS'` âœ…

