# v0.57

> 状态：✅
> 说明：Feat/Export：Markdown/LaTeX 导出 PNG 支持 1.5x/2x；走 PDF 渲染 + 高 DPI 栅格化，保证同样逻辑尺寸但更清晰，并补齐长内容/表格场景的稳定性。

## 📌 一页纸总结（What / Why / Result）

### What

- Feat/Export：hover 预览导出新增 1.5x/2x 分辨率；输出宽度 1080/1620/2160px。
- Feat/Export：导出改为 WebKit PDF 渲染后栅格化生成 PNG，确保高 DPI 清晰度。
- Fix/Export：长内容/全局缩放与表格适配在 PDF 及 PNG 导出路径保持一致，避免空白边缘与过度缩放。
- Test：新增导出分辨率与 PDF 路径的 UI 测试覆盖，补齐右边界/表格宽度回归。

### Why

- 之前仅放大位图，无法达到“同样逻辑尺寸但更清晰”的高分辨率导出需求。
- PDF 渲染可保证文本/矢量内容在高像素导出时仍保持清晰。

### Result

- 1x/1.5x/2x 导出尺寸与逻辑布局一致，高清导出清晰度提升。
- 长内容/宽表格在高 DPI 导出时仍保持可读性与边界完整。

---

## 📂 核心改动

- `Scopy/Views/History/HistoryItemTextPreviewView.swift`（导出分辨率选择 + 持久化）
- `Scopy/Views/History/MarkdownExportService.swift`（PDF 渲染 + 高 DPI 栅格化导出）
- `Scopy/Views/History/MarkdownPreviewWebView.swift`（UI 测试稳定性）
- `Scopy/Views/UITesting/ExportPreviewHarnessView.swift`（导出测试入口）
- `ScopyUITests/ExportMarkdownPNGUITests.swift`（分辨率/PDF/边界与表格回归测试）
- `ScopyUITests/Fixtures/resolution_scale.md`（分辨率测试夹具）

---

## ✅ 测试

- `xcodebuild test -scheme Scopy -destination 'platform=macOS' -only-testing:ScopyTests`：Executed 278 tests, 25 skipped, 0 failures（2025-12-30）

---

## 🔮 遗留与后续

- 建议对真实 Markdown 样本补一组 1.5x/2x 清晰度人工对比截图，避免仅依赖尺寸断言。
