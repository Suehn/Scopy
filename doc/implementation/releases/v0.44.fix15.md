# v0.44.fix15

## 📌 一页纸总结（What / Why / Result）

### What

- Fix/Preview：hover Markdown/LaTeX 预览支持“软换行”——保留源文本中的单换行（不需要空行或 `␠␠`），避免题目/段落在预览里被压成一段连续文本。

### Why

- 真实剪贴板内容（尤其是从 PDF/网页复制的试题/讲义）常用单换行分段，但不包含 Markdown 语义的空行。
- markdown-it 默认会把段内单换行当作空白折叠；这会导致预览里“换行丢失”，只能依赖自动换行，阅读体验明显变差。

### Result

- markdown-it 启用 `breaks: true`：将段内单换行渲染为 `<br>`，从原理上对齐“复制文本的真实分段”。
- 新增回归测试，确保预览脚本维持 `breaks: true` 配置，避免将来回退导致换行再次丢失。

---

## 📂 核心改动

- `Scopy/Views/History/MarkdownHTMLRenderer.swift`
  - `window.markdownit(...)` 配置新增 `breaks: true`。
- `ScopyTests/KaTeXRenderToStringTests.swift`
  - 新增用例断言预览 HTML 含 `breaks: true`。

---

## ✅ 测试

- `xcodebuild test -scheme Scopy -destination 'platform=macOS' -only-testing:ScopyTests`：Executed 237 tests, 7 skipped, 0 failures

