# v0.50.fix17

> çŠ¶æ€ï¼šâœ…
> è¯´æ˜ï¼šFeat/PNGï¼šé›†æˆ pngquantï¼ˆé»˜è®¤ç”¨äº Markdown/LaTeX å¯¼å‡º PNG å‹ç¼©ï¼‰ï¼›å¯é€‰å¯ç”¨â€œå†å²å›¾ç‰‡å†™å…¥å‰å‹ç¼©â€ï¼Œå¹¶æä¾›å¯¼å‡º/å†™å…¥ä¸¤å¥—ç‹¬ç«‹å‚æ•°ä¸å‹ç¼©æ¯”æç¤ºã€‚

## ğŸ“Œ ä¸€é¡µçº¸æ€»ç»“ï¼ˆWhat / Why / Resultï¼‰

### What

- Feat/PNGï¼š**Markdown/LaTeX å¯¼å‡º PNG é»˜è®¤å¯ç”¨ pngquant å‹ç¼©**ï¼ˆå†™å…¥å‰ªè´´æ¿å‰å®Œæˆå‹ç¼©ï¼‰ã€‚
- Feat/PNGï¼šæ–°å¢å¯é€‰å¼€å…³ **â€œå†å²å›¾ç‰‡å‹ç¼©ï¼ˆpngquantï¼‰â€**ï¼ˆé»˜è®¤å…³é—­ï¼‰ï¼Œå¼€å¯åå›¾ç‰‡å†™å…¥å†å²å‰ä¼šå‹ç¼©å¹¶è¦†ç›–åŸå§‹ payloadã€‚
- Feat/PNGï¼šå¯¼å‡º/å†™å…¥å†å² **ä¸¤å¥—ç‹¬ç«‹å‚æ•°**ï¼ˆquality/speed/colorsï¼‰ï¼Œå¹¶æ”¯æŒè‡ªå®šä¹‰ pngquant è·¯å¾„ï¼ˆç•™ç©ºè‡ªåŠ¨æ¢æµ‹ï¼Œä¼˜å…ˆä½¿ç”¨å†…ç½® `Tools/pngquant`ï¼‰ã€‚
- UXï¼šå¯¼å‡ºæˆåŠŸåä¼šåœ¨æŒ‰é’®æç¤ºä¸­å±•ç¤º **ç®€å•å‹ç¼©æ¯”**ï¼ˆä¾‹å¦‚ `pngquant -73%`ï¼‰ã€‚

### Why

- å›¾ç‰‡æ˜¯ `content/` çš„ä¸»è¦ç©ºé—´æ¥æºï¼›å¯¼å‡º PNG ä¸å†å²å›¾ç‰‡è‹¥ä¸ä¼˜åŒ–ï¼Œå®¹æ˜“è§¦å‘è‡ªåŠ¨æ¸…ç†é˜ˆå€¼ï¼Œé€ æˆâ€œå†å²æ¡ç›®å˜å°‘â€çš„ä½“æ„Ÿé—®é¢˜ã€‚
- pngquant å¯¹ PNG çš„å‹ç¼©æ”¶ç›Šæ˜¾è‘—ï¼Œä¸”ä¸æ”¹å˜å¤åˆ¶å›¾ç‰‡è¿›å…¥å†å²çš„é»˜è®¤è¡Œä¸ºï¼ˆé¿å…æ„å¤–æŸä¼¤åŸå›¾è´¨é‡ï¼‰ã€‚

### Result

- å¯¼å‡ºï¼šå¯¼å‡ºç»“æœä¼šä¼˜å…ˆè¢«å‹ç¼©åå†™å…¥å‰ªè´´æ¿ï¼Œå› æ­¤åç»­è¿›å…¥ Scopy å†å²/è½ç›˜åˆ° `content/` çš„ä¹Ÿæ˜¯ **å‹ç¼©åçš„ PNG**ï¼ˆæ»¡è¶³â€œå‹ç¼©å³æ›¿ä»£åŸå›¾â€çš„è¯­ä¹‰ï¼‰ã€‚
- å†å²å›¾ç‰‡ï¼šé»˜è®¤ä¸å‹ç¼©ï¼›ç”¨æˆ·å¯æŒ‰éœ€å¼€å¯å¹¶è°ƒæ•´ä¸¤å¥—å‚æ•°ã€‚
- å…¼å®¹ï¼šè‹¥ pngquant ä¸å¯ç”¨ï¼Œå°† best-effort è·³è¿‡å‹ç¼©ï¼Œä¸å½±å“å¯¼å‡º/å†™å…¥å†å²çš„åŸæœ‰åŠŸèƒ½é“¾è·¯ã€‚

> âš ï¸ å·²çŸ¥é—®é¢˜ï¼šéƒ¨åˆ† `v0.50.fix17` release äº§ç‰©æœªå°† `Tools/pngquant` å®é™…æ‰“åŒ…è¿› Appï¼ˆå¯¼è‡´å‹ç¼©ä¸ç”Ÿæ•ˆ/ä¸å¯ç”¨ï¼‰ã€‚å·²åœ¨ `v0.50.fix18` ä¿®å¤ã€‚

---

## ğŸ“‚ æ ¸å¿ƒæ”¹åŠ¨

- `Scopy/Services/PngquantService.swift`
- `Scopy/Views/History/MarkdownExportService.swift`
- `Scopy/Application/ClipboardService.swift`
- `Scopy/Domain/Models/SettingsDTO.swift`
- `Scopy/Infrastructure/Settings/SettingsStore.swift`
- `Scopy/Views/Settings/ClipboardSettingsPage.swift`
- `Scopy/Views/History/HistoryItemTextPreviewView.swift`
- `Scopy/Resources/Tools/pngquant`
- `Scopy/Resources/ThirdParty/pngquant/*`
- `project.yml`

---

## âœ… æµ‹è¯•

- `xcodebuild test -scheme Scopy -destination 'platform=macOS' -only-testing:ScopyTests`ï¼šExecuted 276 tests, 25 skipped, 0 failures
- `make release-validate`ï¼šâœ…
