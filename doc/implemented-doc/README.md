# Scopy å®ç°æ–‡æ¡£ç´¢å¼•

æœ¬ç›®å½•åŒ…å« Scopy é¡¹ç›®çš„å®ç°è®°å½•å’Œå¼€å‘æ–‡æ¡£ã€‚

## å¿«é€Ÿå¯¼èˆª

### ğŸ“‹ ä¸»æ–‡æ¡£

- **[v0.3.1.md](./v0.3.1.md)** - **æœ€æ–°** å¤§å›¾ç‰‡æ€§èƒ½ä¼˜åŒ–
  - è½»é‡çº§å›¾ç‰‡æŒ‡çº¹ç®—æ³•
  - ä¸»çº¿ç¨‹æ€§èƒ½ä¼˜åŒ– (50Ã—+)
  - å»é‡åŠŸèƒ½éªŒè¯
  - ç”¨æˆ·æ— æ„ŸçŸ¥ä½“éªŒ

- **[v0.3.md](./v0.3.md)** - å‰åç«¯å®Œæ•´è”è°ƒ
  - åç«¯ä¸å‰ç«¯å®Œæ•´é›†æˆ
  - å…¨å±€å¿«æ·é”® (â‡§âŒ˜C)
  - æœç´¢åŠŸèƒ½ç«¯åˆ°ç«¯éªŒè¯
  - æ ¸å¿ƒåŠŸèƒ½å…¨éƒ¨å¯ç”¨

- **[v0.2.md](./v0.2.md)** - åç«¯å®Œæ•´å®ç°
  - ClipboardMonitor ç³»ç»Ÿå‰ªè´´æ¿ç›‘æ§
  - StorageService SQLite + FTS5 å­˜å‚¨
  - SearchService å¤šæ¨¡å¼æœç´¢
  - å®Œæ•´æµ‹è¯•å¥—ä»¶å’Œæ€§èƒ½åŸºå‡†

- **[v0.1.md](./v0.1.md)** - å‰ç«¯åˆå§‹å®ç°
  - å®ç°è·¯çº¿å’Œè®¾è®¡åŸåˆ™
  - UIç»„ä»¶å’ŒMockåç«¯
  - ä½¿ç”¨æ•™ç¨‹å’Œä»£ç ç¤ºä¾‹

### ğŸ¯ å¿«é€Ÿæ£€æŸ¥è¡¨

æ–°å¯åŠ¨å¯¹è¯æ—¶ï¼Œå‚è€ƒè¿™ä¸ªå¿«é€Ÿæ£€æŸ¥ï¼š

```
é¡¹ç›®çŠ¶æ€æ£€æŸ¥:
  âœ… æºä»£ç ä½ç½®: /Users/ziyi/Documents/code/Scopy/Scopy/
  âœ… ç¼–è¯‘å‘½ä»¤: make build
  âœ… è¿è¡Œå‘½ä»¤: make run (çœŸå®æœåŠ¡: USE_MOCK_SERVICE=0 make run)
  âœ… æµ‹è¯•å‘½ä»¤: make test
  âœ… å·²ç¼–è¯‘: Scopy.app
  âœ… å‰åç«¯å®Œå…¨é›†æˆ (v0.3)

åŠŸèƒ½çŠ¶æ€:
  âœ… åŸºç¡€ UIï¼ˆæœç´¢ã€åˆ—è¡¨ã€å¯¼èˆªï¼‰
  âœ… æœç´¢é˜²æŠ–ï¼ˆ150msï¼‰
  âœ… æ‡’åŠ è½½åˆ†é¡µ
  âœ… é”®ç›˜å¿«æ·é”®
  âœ… æµ®åŠ¨çª—å£
  âœ… ç³»ç»Ÿå‰ªè´´æ¿ç›‘æ§
  âœ… SQLite æ•°æ®æŒä¹…åŒ–
  âœ… FTS5 å…¨æ–‡æœç´¢ (å·²éªŒè¯)
  âœ… åˆ†çº§å­˜å‚¨ï¼ˆå°å†…å®¹å†…è”ï¼Œå¤§å†…å®¹å¤–éƒ¨ï¼‰
  âœ… å†…å®¹å»é‡ (å·²éªŒè¯)
  âœ… è‡ªåŠ¨æ¸…ç†
  âœ… å…¨å±€å¿«æ·é”® (â‡§âŒ˜C)
  âœ… å¤§å›¾ç‰‡æ€§èƒ½ä¼˜åŒ– (v0.3.1)
  â³ è®¾ç½®çª—å£ (v0.4 è®¡åˆ’)
```

### ğŸ“ æ–‡ä»¶ç»“æ„

```
implemented-doc/
â”œâ”€â”€ README.md       â† ä½ åœ¨è¿™é‡Œ
â”œâ”€â”€ v0.1.md         â† å‰ç«¯å®ç°æ–‡æ¡£
â”œâ”€â”€ v0.2.md         â† åç«¯å®ç°æ–‡æ¡£
â”œâ”€â”€ v0.3.md         â† å‰åç«¯è”è°ƒæ–‡æ¡£
â””â”€â”€ v0.3.1.md       â† å¤§å›¾ç‰‡æ€§èƒ½ä¼˜åŒ– (æœ€æ–°)
```

### ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
cd /Users/ziyi/Documents/code/Scopy

# ç¬¬ä¸€æ¬¡
make setup

# æ„å»ºå’Œè¿è¡Œ
make run

# è¿è¡Œæµ‹è¯•
make test

# æ€§èƒ½åŸºå‡†
make benchmark
```

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ       | ä¸»è¦å†…å®¹                                    |
| ---- | ---------- | ------------------------------------------- |
| v0.3.1 | 2025-11-27 | å¤§å›¾ç‰‡æ€§èƒ½ä¼˜åŒ–ï¼šè½»é‡æŒ‡çº¹ç®—æ³•ã€ä¸»çº¿ç¨‹ä¼˜åŒ–    |
| v0.3 | 2024-11-27 | å‰åç«¯è”è°ƒï¼šå®Œæ•´é›†æˆã€å…¨å±€å¿«æ·é”®           |
| v0.2 | 2024-11-27 | åç«¯å®Œæ•´å®ç°ï¼šç›‘æ§ã€å­˜å‚¨ã€æœç´¢ã€æµ‹è¯•        |
| v0.1 | 2024-11-27 | åˆå§‹å®ç°ï¼šMock åç«¯ + å®Œæ•´ UI               |

## é¡¹ç›®æ¶æ„æ¦‚è§ˆ

```
Protocol-First Design:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UI Layer (SwiftUI Views)           â”‚
â”‚  - ContentView, HeaderView, etc.    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“ (via Protocol)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ClipboardServiceProtocol           â”‚
â”‚  - fetchRecent(), search(), etc.    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                            â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ MockService   â”‚         â”‚ RealClipboardServiceâ”‚
  â”‚ (å¼€å‘æµ‹è¯•)    â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚ClipboardMonitorâ”‚ â”‚
                            â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
                            â”‚  â”‚StorageService  â”‚ â”‚
                            â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
                            â”‚  â”‚SearchService   â”‚ â”‚
                            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒæ–‡ä»¶é€ŸæŸ¥

### åè®®å’ŒæœåŠ¡å±‚

| æ–‡ä»¶                                        | ç”¨é€”            | è¡Œæ•° |
| ------------------------------------------- | --------------- | ---- |
| `Protocols/ClipboardServiceProtocol.swift`  | åç«¯æ¥å£å®šä¹‰    | ~130 |
| `Services/ClipboardMonitor.swift`           | å‰ªè´´æ¿ç›‘æ§      | ~600 |
| `Services/StorageService.swift`             | SQLiteå­˜å‚¨      | ~500 |
| `Services/SearchService.swift`              | FTS5æœç´¢        | ~300 |
| `Services/RealClipboardService.swift`       | æœåŠ¡æ•´åˆ        | ~200 |
| `Services/MockClipboardService.swift`       | æµ‹è¯•æ•°æ®        | ~200 |
| `Services/PerformanceProfiler.swift`        | æ€§èƒ½åˆ†æ        | ~250 |
| `Services/HotKeyService.swift`              | å…¨å±€å¿«æ·é”®      | ~165 |

### UIå±‚

| æ–‡ä»¶                            | ç”¨é€”          | è¡Œæ•° |
| ------------------------------- | ------------- | ---- |
| `Observables/AppState.swift`    | çŠ¶æ€ç®¡ç†      | ~285 |
| `Views/ContentView.swift`       | ä¸» UI         | ~100 |
| `Views/HistoryListView.swift`   | åˆ—è¡¨ + æ‡’åŠ è½½ | ~160 |
| `Views/HeaderView.swift`        | æœç´¢æ¡†        | ~80  |
| `Views/FooterView.swift`        | åº•éƒ¨æ         | ~120 |
| `FloatingPanel.swift`           | æµ®åŠ¨çª—å£      | ~100 |

### æµ‹è¯•

| æ–‡ä»¶                                   | ç”¨é€”         | è¡Œæ•° |
| -------------------------------------- | ------------ | ---- |
| `ScopyTests/StorageServiceTests.swift` | å­˜å‚¨æµ‹è¯•     | ~300 |
| `ScopyTests/SearchServiceTests.swift`  | æœç´¢æµ‹è¯•     | ~350 |
| `ScopyTests/ClipboardMonitorTests.swift` | ç›‘æ§æµ‹è¯•   | ~250 |
| `ScopyTests/IntegrationTests.swift`    | é›†æˆæµ‹è¯•     | ~300 |
| `ScopyTests/PerformanceTests.swift`    | æ€§èƒ½æµ‹è¯•     | ~350 |

## Makefile å‘½ä»¤é€ŸæŸ¥

```bash
# æ„å»º
make setup         # å®‰è£…ä¾èµ– + ç”Ÿæˆé¡¹ç›®
make build         # ç¼–è¯‘ (Debug)
make release       # ç¼–è¯‘ (Release)
make run           # ç¼–è¯‘å¹¶è¿è¡Œ
make quick-build   # å¿«é€Ÿç¼–è¯‘ï¼ˆè·³è¿‡é¡¹ç›®ç”Ÿæˆï¼‰
make xcode         # æ‰“å¼€ Xcode
make clean         # æ¸…ç†

# æµ‹è¯•
make test          # è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test-unit     # è¿è¡Œå•å…ƒæµ‹è¯•
make test-perf     # è¿è¡Œæ€§èƒ½æµ‹è¯•
make test-integration  # è¿è¡Œé›†æˆæµ‹è¯•
make coverage      # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
make benchmark     # å®Œæ•´åŸºå‡†æµ‹è¯•

# å¼€å‘
make format        # æ ¼å¼åŒ–ä»£ç  (éœ€è¦swift-format)
make lint          # æ£€æŸ¥ä»£ç  (éœ€è¦swiftlint)
make stats         # æ˜¾ç¤ºé¡¹ç›®ç»Ÿè®¡
make help          # æ˜¾ç¤ºå¸®åŠ©
```

## æœåŠ¡åˆ‡æ¢

é»˜è®¤ Debug æ¨¡å¼ä½¿ç”¨ Mock æœåŠ¡ï¼Œå¯é€šè¿‡ç¯å¢ƒå˜é‡åˆ‡æ¢ï¼š

```bash
# ä½¿ç”¨çœŸå®æœåŠ¡
USE_MOCK_SERVICE=0 make run

# æˆ–ä¿®æ”¹ AppState.swift
private init() {
    // self.service = MockClipboardService()  // å¼€å‘
    self.service = RealClipboardService()      // ç”Ÿäº§
}
```

## æ•°æ®å­˜å‚¨ä½ç½®

```
~/Library/Application Support/Scopy/
â”œâ”€â”€ clipboard.db          # SQLiteæ•°æ®åº“
â”œâ”€â”€ content/              # å¤§å†…å®¹å¤–éƒ¨å­˜å‚¨
â”‚   â””â”€â”€ <uuid>.png
â””â”€â”€ thumbnails/           # ç¼©ç•¥å›¾ç¼“å­˜
```

## æ€§èƒ½ç›®æ ‡ (v0.md)

| åœºæ™¯ | ç›®æ ‡ | çŠ¶æ€ |
|------|------|------|
| â‰¤5k æ¡æœç´¢ | P95 â‰¤ 50ms | âœ… |
| 10k-100k æ¡æœç´¢ | P95 â‰¤ 150ms | âœ… |
| æœç´¢é˜²æŠ– | 150-200ms | âœ… |
| å¤§å›¾ç‰‡å¤„ç† | <10ms | âœ… (v0.3.1) |

## ä¸‹ä¸€æ­¥å·¥ä½œ

1. **UIå®Œå–„**: è®¾ç½®çª—å£ (v0.4)
2. **åŠŸèƒ½å¢å¼º**: æœç´¢æ¨¡å¼é€‰æ‹©ã€æ‰¹é‡æ“ä½œ
3. **å¯é€‰ç‰¹æ€§**: iCloudåŒæ­¥ã€å¯¼å‡ºã€å†…å®¹é¢„è§ˆ

## ç›¸å…³æ–‡ä»¶

- `doc/dev-doc/v0.md` - å®Œæ•´è®¾è®¡è§„èŒƒ
- `CLAUDE.md` - å¼€å‘æŒ‡å—
- `README.md` - ç”¨æˆ·æ–‡æ¡£

---

**æœ€åæ›´æ–°**: 2025-11-27
**ç»´æŠ¤è€…**: Claude Code
