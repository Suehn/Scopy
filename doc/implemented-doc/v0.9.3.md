# v0.9.3 — 全局快捷键录制立即生效

## 📌 一页纸总结
- What: 修复录制新快捷键需重启才生效的问题，按下即触发，不再需要长按。
- Why: 设置窗口录制后未即时注册/持久化，体验割裂；Carbon 同时监听按下+松开导致“按住才显示”。
- Result: 录制或保存后立刻注册并持久化，全局快捷键仅在按下时触发。

## 🏗️ 实现路线
1. 为 AppDelegate 添加统一的 `applyHotKey`，同时注册 HotKeyService 并写入 UserDefaults。
2. HotKeyRecorder 在录制成功后直接调用 `applyHotKey`；取消时恢复旧快捷键。
3. HotKeyService 仅监听/处理 `kEventHotKeyPressed`，避免按下+松开双触发。

## 📂 核心改动
- `Scopy/AppDelegate.swift` — 新增 `applyHotKey` 与持久化逻辑，启动时及变更时统一调用。
- `Scopy/Views/SettingsView.swift` — 录制与保存都走 `applyHotKey`，取消录制恢复旧键并清理监听。
- `Scopy/Services/HotKeyService.swift` — Carbon 仅注册/处理按下事件。

## 🎯 关键指标
- 构建：`xcodebuild -scheme Scopy -configuration Debug -destination 'platform=macOS' build` ✅

## 📊 当前状态
- 快捷键录制：无需重启，录制/保存后立即生效。
- 触发体验：按下即触发，不再需要按住。

## 🔮 遗留与后续
- 增加自动化用例覆盖录制后即时触发与持久化。
- 评估在取消录制时是否需要弹出提示确认恢复旧快捷键。
