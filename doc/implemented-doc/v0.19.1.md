# v0.19.1 - Fuzzy+ æœç´¢æ¨¡å¼

## ğŸ“Œ ä¸€é¡µçº¸æ€»ç»“

| é¡¹ç›® | å†…å®¹ |
|------|------|
| **What** | æ–°å¢ Fuzzy+ æœç´¢æ¨¡å¼ï¼Œæ”¯æŒæŒ‰ç©ºæ ¼åˆ†è¯çš„å¤šè¯æ¨¡ç³ŠåŒ¹é… |
| **Why** | åŸ Fuzzy æ¨¡å¼å°†ç©ºæ ¼è§†ä¸ºå¿…é¡»åŒ¹é…çš„å­—ç¬¦ï¼Œæ— æ³•æœç´¢ "å‘¨äº” åŒ¹é…" è¿™æ ·çš„å¤šè¯æŸ¥è¯¢ |
| **Result** | æœç´¢ "å‘¨äº” åŒ¹é…" å¯ä»¥åŒ¹é…åŒæ—¶åŒ…å« "å‘¨äº”" å’Œ "åŒ¹é…" çš„æ–‡æœ¬ï¼Œé»˜è®¤æœç´¢æ¨¡å¼æ”¹ä¸º Fuzzy+ |

---

## ğŸ—ï¸ å®ç°è·¯çº¿

1. âœ… æ–°å¢ `fuzzyPlus` åˆ° SearchMode æšä¸¾
2. âœ… å®ç° `fuzzyPlusMatch` æ–¹æ³• - æŒ‰ç©ºæ ¼åˆ†è¯ï¼Œæ¯ä¸ªè¯ç‹¬ç«‹æ¨¡ç³ŠåŒ¹é…
3. âœ… å®ç° `searchFuzzyPlus` æ–¹æ³• - ä½¿ç”¨ç¼“å­˜æœç´¢
4. âœ… æ›´æ–° `search` æ–¹æ³•è·¯ç”±åˆ°æ–°æ¨¡å¼
5. âœ… æ›´æ–° HeaderView æœç´¢æ¨¡å¼èœå•
6. âœ… æ›´æ–° SettingsView è®¾ç½®é¡µé¢
7. âœ… ä¿®å¤ MockClipboardService switch exhaustiveness
8. âœ… å°†é»˜è®¤æœç´¢æ¨¡å¼æ”¹ä¸º `fuzzyPlus`

---

## ğŸ“‚ æ ¸å¿ƒæ”¹åŠ¨

| æ–‡ä»¶ | æ”¹åŠ¨ |
|------|------|
| `Scopy/Protocols/ClipboardServiceProtocol.swift` | SearchMode æšä¸¾æ–°å¢ `fuzzyPlus`ï¼ŒSettingsDTO é»˜è®¤å€¼æ”¹ä¸º `fuzzyPlus` |
| `Scopy/Services/SearchService.swift` | æ–°å¢ `fuzzyPlusMatch` å’Œ `searchFuzzyPlus` æ–¹æ³• |
| `Scopy/Services/MockClipboardService.swift` | switch case è¡¥å…… `fuzzyPlus` |
| `Scopy/Views/HeaderView.swift` | æœç´¢æ¨¡å¼èœå•æ–°å¢ "Fuzzy+" é€‰é¡¹ |
| `Scopy/Views/SettingsView.swift` | è®¾ç½®é¡µé¢æ–°å¢ "Fuzzy+" é€‰é¡¹ |

---

## ğŸ¯ å…³é”®æŒ‡æ ‡

| æŒ‡æ ‡ | ç»“æœ |
|------|------|
| å•å…ƒæµ‹è¯• | **161/161 passed** (1 skipped) |
| æ„å»ºçŠ¶æ€ | Debug âœ… |

---

## ğŸ“Š å½“å‰çŠ¶æ€

```
æœç´¢æ¨¡å¼:
  âœ… Exact - ç²¾ç¡®åŒ¹é… (FTS5)
  âœ… Fuzzy - å­—ç¬¦é¡ºåºæ¨¡ç³ŠåŒ¹é…
  âœ… Fuzzy+ - åˆ†è¯ + æ¯è¯æ¨¡ç³ŠåŒ¹é… (æ–°å¢ï¼Œé»˜è®¤)
  âœ… Regex - æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
```

---

## ğŸ”® é—ç•™ä¸åç»­

æ— é—ç•™é—®é¢˜ã€‚

---

## ğŸ“ æŠ€æœ¯ç»†èŠ‚

### fuzzyPlusMatch ç®—æ³•

```swift
private func fuzzyPlusMatch(text: String, query: String) -> Bool {
    // æŒ‰ç©ºæ ¼åˆ†è¯ï¼Œè¿‡æ»¤ç©ºå­—ç¬¦ä¸²
    let words = query.split(separator: " ").map { String($0) }.filter { !$0.isEmpty }

    // ç©ºæŸ¥è¯¢åŒ¹é…æ‰€æœ‰
    guard !words.isEmpty else { return true }

    // æ‰€æœ‰è¯éƒ½å¿…é¡»åŒ¹é…
    return words.allSatisfy { word in
        fuzzyMatch(text: text, query: word)
    }
}
```

### ä½¿ç”¨ç¤ºä¾‹

| æŸ¥è¯¢ | æ–‡æœ¬ | Fuzzy ç»“æœ | Fuzzy+ ç»“æœ |
|------|------|------------|-------------|
| "å‘¨äº” åŒ¹é…" | "å‘¨äº”çš„ä¼šè®®åŒ¹é…æˆåŠŸ" | âŒ (ç©ºæ ¼ä¸åŒ¹é…) | âœ… |
| "hello world" | "hello beautiful world" | âŒ | âœ… |
| "abc def" | "abcdef" | âŒ | âœ… |

---

**å®Œæˆæ—¶é—´**: 2025-12-04
**ç»´æŠ¤è€…**: Claude Code
