# v0.43.22 性能对比（v0.43.21 → v0.43.22）

**日期**: 2025-12-15

## 对比版本

- v0.43.21 → v0.43.22

> v0.43.21 为 Dev/Release 流程改动，不涉及搜索/存储/清理热路径；因此对照基线沿用 v0.43.20 的实测值。

## 测试环境

- 设备：Apple M3（24 GB）
- 系统：macOS 15.7.2（24G325）
- 架构：arm64
- 配置：Debug
- 命令：`make test-perf`（`RUN_PERF_TESTS=1`）
- 电源：Low Power Mode disabled

## 性能对比表格

| 指标 | v0.43.21（基线） | v0.43.22 | 变化 |
|------|-----------------:|---------:|------:|
| Search 5k P95 (fuzzyPlus) | 4.55ms | 5.41ms | +0.86ms (+18.90%) |
| Search 5k cold start (fuzzyPlus) | 36.24ms | 38.37ms | +2.13ms (+5.88%) |
| Search 10k P95 (fuzzyPlus) | 48.84ms | 49.52ms | +0.68ms (+1.39%) |
| Search 10k cold start (fuzzyPlus) | 111.87ms | 108.99ms | -2.88ms (-2.57%) |
| Service-path disk 10k P95 (fuzzyPlus) | 38.92ms | 40.94ms | +2.02ms (+5.19%) |
| Service-path disk 10k cold start (fuzzyPlus) | 268.40ms | 257.04ms | -11.36ms (-4.23%) |
| Regex 20k P95 | 3.53ms | 3.40ms | -0.13ms (-3.68%) |

## 其他观测

- Mixed content disk search（single run）：15.89ms
- Memory（5k inserts）：
  - Initial：65.5MB
  - After 5k inserts：67.9MB
  - Increase：2.4MB
- Memory stability（500 iterations）：
  - Initial：65.6MB
  - Final：65.8MB
  - Growth：0.3MB

## 测试用例变化

- 无。

## 性能回归说明

- 本版本新增 hover Markdown 渲染预览（异步渲染 + 缓存），不涉及搜索/存储热路径；核心性能指标保持在原有基线附近波动。

## 总结

- 搜索/服务链路性能基线整体稳定；新增 Markdown + 公式预览不影响既有性能目标。
